<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    <meta name="description" content="Hexo Theme Redefine">
    <meta name="author" content="萧">
    <link rel="canonical" href="http://example.com/2023/04/01/Java%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/SpringBoot/SpringBoot%E7%AC%94%E8%AE%B0/" />
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-redefine.png">
    <link rel="icon" type="image/png" href="/images/redefine-logo.svg" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/redefine-logo.svg">
    <link rel="shortcut icon" href="/images/redefine-logo.svg">
    
    <title>
        
            SpringBoot学习笔记 |
        
        等想好起什么名字后再来改
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/css/fonts.css">

    
    <link rel="preconnect" href="https://evan.beee.top" crossorigin>
    <script id="hexo-configurations">
    let REDEFINE = window.REDEFINE || {};
    REDEFINE.hexo_config = {"hostname":"example.com","root":"/","language":"en"};
    REDEFINE.theme_config = {"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true},"style":{"primary_color":"#005080","avatar":"/images/redefine-avatar.svg","favicon":"/images/redefine-logo.svg","article_img_align":"center","right_side_width":"210px","content_max_width":"1000px","nav_color":{"left":"#f78736","right":"#367df7","transparency":35},"hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"background_image":{"light":"https://evan.beee.top/img/wallhaven-wqery6-light.webp","dark":"https://evan.beee.top/img/wallhaven-wqery6-dark.webp"},"title_color":{"light":"#fff","dark":"#d1d1b6"},"description":"Theme Redefine"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":false}}},"local_search":{"enable":false,"preload":true},"code_block":{"copy":true,"style":"mac"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"0.5.2","friend_links":{"columns":2}};
    REDEFINE.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
    
    
<link rel="stylesheet" href="/css/fontawesome.min.css">

    
<link rel="stylesheet" href="/css/brands.min.css">

    
<link rel="stylesheet" href="/css/solid.min.css">

    
<link rel="stylesheet" href="/css/regular.min.css">

    
    
    
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">
    
    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                等想好起什么名字后再来改
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="pc">
                <ul class="menu-list">
                    
                        
                            <li class="menu-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        主页
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="menu-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/archives"  >
                                    
                                        
                                            <i class="fa-regular fa-archive"></i>
                                        
                                        存档记录
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="menu-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/categories"  >
                                    
                                        
                                            <i class="fa-regular fa-user"></i>
                                        
                                        分类
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="menu-item">
                                <!-- Menu -->
                                <a class="has-dropdown" 
                                    href="#" onClick="return false;">
                                    
                                        
                                            <i class="fa-regular fa-link"></i>
                                        
                                        快捷链接&nbsp;<i class="fa-solid fa-chevron-down"></i>
                                    
                                </a>
                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                    
                                        <li>
                                        <a href="/link2">LINK2
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a href="/link3">LINK3
                                        </a>
                                        </li>
                                    
                                    </ul>
                                
                            </li>
                    
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                
                    <li class="drawer-menu-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                主页
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-menu-item flex-center">
                        <a class="" 
                        href="/archives"  >
                             
                                
                                    <i class="fa-regular fa-archive"></i>
                                
                                存档记录
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-menu-item flex-center">
                        <a class="" 
                        href="/categories"  >
                             
                                
                                    <i class="fa-regular fa-user"></i>
                                
                                分类
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-menu-item flex-center">
                        <a class="has-dropdown" 
                        href="#" onClick="return false;">
                            
                                
                                    <i class="fa-regular fa-link"></i>
                                
                                快捷链接&nbsp;<i class="fa-solid fa-chevron-down"></i>
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                              
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="/link2">LINK2</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="/link3">LINK3</a>
                            </li>
                        
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">
            <div class="article-title">
                <span class="title-hover-animation"><h1 style="font-size:2rem; font-weight: bold; margin: 10px 0;">SpringBoot学习笔记</h1></span>
            </div>

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="/images/redefine-avatar.svg">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">萧</span>
                            
                                <span class="author-label">lol</span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="pc">2023-04-01 08:14:24</span>
        <span class="mobile">2023-04-01 08:14</span>
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/java/">java</a>&nbsp;
                    </li>
                
                    <li>
                        &gt; <a href="/categories/java/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/">后端开发</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <h1 id="SpringBoot一站式开发"><a href="#SpringBoot一站式开发" class="headerlink" title="SpringBoot一站式开发"></a>SpringBoot一站式开发</h1><p>官网：<a class="link"   target="_blank" rel="noopener" href="https://spring.io/projects/spring-boot" >https://spring.io/projects/spring-boot <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p> Spring Boot可以轻松创建独立的、基于Spring的生产级应用程序，它可以让你“运行即可”。大多数Spring Boot应用程序只需要少量的Spring配置。</p>
<p>在SSM阶段，当需要搭建一个基于Spring全家桶的Web应用程序时，不得不做大量的依赖导入和框架整合相关的Bean定义，光是整合框架就花费了大量的时间。</p>
<p>但是实际上，整合框架其实基本都是一些固定流程，每创建一个新的Web应用程序，基本都会使用同样的方式去整合框架。因此我们完全可以将一些重复的配置作为约定，只要框架遵守这个约定，提供默认的配置，这样就不用我们再去配置了。</p>
<p>而SpringBoot正是将这些过程大幅度进行了简化，它可以自动进行配置，只需要导入对应的启动器（starter）依赖即可。</p>
<p>SpringBoot功能：</p>
<ul>
<li>创建独立的Spring应用程序</li>
<li>直接嵌入Tomcat、Jetty或Undertow（无需部署WAR包，打包成Jar本身就是一个可以运行的应用程序）</li>
<li>提供一站式的“starter”依赖项，以简化Maven配置（需要整合什么框架，直接导对应框架的starter依赖）</li>
<li>尽可能自动配置Spring和第三方库（除非特殊情况，否则几乎不需要你进行什么配置）</li>
<li>提供生产就绪功能，如指标、运行状况检查和外部化配置</li>
<li>没有代码生成，也没有XML配置的要求</li>
</ul>
<h1 id="SpringBoot两大特性"><a href="#SpringBoot两大特性" class="headerlink" title="SpringBoot两大特性"></a>SpringBoot两大特性</h1><h2 id="起步依赖"><a href="#起步依赖" class="headerlink" title="起步依赖"></a>起步依赖</h2><p><strong>依赖冲突</strong></p>
<p>一般程序在运行时发生类似于 java.lang.ClassNotFoundException，Method not found: ‘……’，或者莫名其妙的异常信息，这种情况一般很大可能就是 jar包依赖冲突的问题引起的了。</p>
<p>原因：</p>
<p>​一般在是A依赖C(低版本C)，B也依赖C(高版本C)。 都是他们依赖的又是不同版本的C的时候会出现。</p>
<p><strong>解决依赖冲突</strong></p>
<p>排除掉低版本的依赖，留下高版本的依赖。</p>
<p>借助MavenHelper插件来帮助排查</p>
<p><strong>SpringBoot的版本锁定帮助我们解决依赖冲突</strong></p>
<p>SpringBoot模块都需要继承一个父工<em>spring-boot-starter-parent</em>。在spring-boot-starter-parent的父工程<em>spring-boot-dependencies</em>中对常用的依赖进行了版本锁定。这样我们在添加依赖时，很多时候都不需要添加依赖的版本号了。</p>
<p><strong>starter机制</strong></p>
<p>需要使用某种功能时只需要引入对应的starter即可。一个starter针对一种特定的场景，其内部引入了该场景所需的依赖，这样就不需要单独引入多个依赖了。</p>
<p>​命名规律</p>
<p>一般来说，非官方starter是没有进行版本锁定的，所以要指定版本号</p>
<ul>
<li>官方starter都是以  <code>spring-boot-starter</code>开头后面跟上场景名称。例如：spring-boot-starter-data-jpa</li>
<li>非官方starter则是以 <code>场景名-spring-boot-starter</code>的格式，例如：mybatis-spring-boot-starter</li>
</ul>
<h2 id="自动配置"><a href="#自动配置" class="headerlink" title="自动配置"></a>自动配置</h2><p><strong>概念</strong></p>
<p>Springboot遵循“<strong>约定优于配置</strong>”的原则，自动进行了默认配置。</p>
<p>需要使用什么场景时，就会自动配置这个场景相关的配置。</p>
<p>​如果默认配置不符合需求，修改这部分配置即可。</p>
<p><strong>原理</strong></p>
<p>等到看源码的时候再说</p>
<h1 id="前置—检查环境"><a href="#前置—检查环境" class="headerlink" title="前置—检查环境"></a>前置—检查环境</h1><p>Jdk：8<br>Maven：3.5以上（“文件-设置-Maven”查看）<br>SpringBoot：2.5以上，3.0以下</p>
<p><strong>注意</strong>：如果maven无法解析依赖项，外部库总是导不入maven的jar包，则需打开maven的setting.xml文件（右击pom.xml-maven-打开setting.xml）添加以下内容：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrors</span></span></span><br><span class="line"><span class="tag">        &lt;<span class="attr">mirror</span></span></span><br><span class="line"><span class="tag">            &lt;<span class="attr">idaliyunmaven</span>&lt;/<span class="attr">id</span></span></span><br><span class="line"><span class="tag">            &lt;<span class="attr">mirrorOfcentral</span>&lt;/<span class="attr">mirrorOf</span></span></span><br><span class="line"><span class="tag">            &lt;<span class="attr">namealiyun</span> <span class="attr">maven</span>&lt;/<span class="attr">name</span></span></span><br><span class="line"><span class="tag">            &lt;<span class="attr">urlhttps:</span>//<span class="attr">maven.aliyun.com</span>/<span class="attr">repository</span>/<span class="attr">public</span> &lt;/<span class="attr">url</span></span></span><br><span class="line"><span class="tag">        &lt;/<span class="attr">mirror</span></span></span><br><span class="line"><span class="tag">    &lt;/<span class="attr">mirrors</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">profiles</span></span></span><br><span class="line"><span class="tag">        &lt;<span class="attr">profile</span></span></span><br><span class="line"><span class="tag">            &lt;<span class="attr">idjdk-1.8</span>&lt;/<span class="attr">id</span></span></span><br><span class="line"><span class="tag">            &lt;<span class="attr">activation</span></span></span><br><span class="line"><span class="tag">                &lt;<span class="attr">activeByDefaulttrue</span>&lt;/<span class="attr">activeByDefault</span></span></span><br><span class="line"><span class="tag">                &lt;<span class="attr">jdk1.8</span>&lt;/<span class="attr">jdk</span></span></span><br><span class="line"><span class="tag">            &lt;/<span class="attr">activation</span></span></span><br><span class="line"><span class="tag">            &lt;<span class="attr">properties</span></span></span><br><span class="line"><span class="tag">                &lt;<span class="attr">maven.compiler.source1.8</span>&lt;/<span class="attr">maven.compiler.source</span></span></span><br><span class="line"><span class="tag">                &lt;<span class="attr">maven.compiler.target1.8</span>&lt;/<span class="attr">maven.compiler.target</span></span></span><br><span class="line"><span class="tag">                &lt;<span class="attr">maven.compiler.compilerVersion1.8</span>&lt;/<span class="attr">maven.compiler.compilerVersion</span></span></span><br><span class="line"><span class="tag">            &lt;/<span class="attr">properties</span></span></span><br><span class="line"><span class="tag">        &lt;/<span class="attr">profile</span></span></span><br><span class="line"><span class="tag">    &lt;/<span class="attr">profiles</span></span></span><br></pre></td></tr></table></figure></div>

<h1 id="SpringBoot项目文件结构（啥都不勾选）"><a href="#SpringBoot项目文件结构（啥都不勾选）" class="headerlink" title="SpringBoot项目文件结构（啥都不勾选）"></a>SpringBoot项目文件结构（啥都不勾选）</h1><p><strong>自带一个SpringBoot启动类</strong></p>
<p>创建SpringBoot项目之后，首先会自动生成一个主类，而主类中的<code>main</code>方法中调用了<code>SpringApplication</code>类的静态方法<code>run()</code>来启动整个SpringBoot项目，并且主类的上方有一个<code>@SpringBootApplication</code>注解：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringBootTestApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringBootTestApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>同时还自带了一个测试类</strong></p>
<p>测试类的上方仅添加了一个<code>@SpringBootTest</code>注解：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SpringBootTestApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>pom.xml文件</strong></p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?</span></span><br><span class="line"><span class="meta">&lt;project xmlns=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="meta">         xsi:schemaLocation=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span></span></span><br><span class="line"><span class="meta">    &lt;modelVersion4.0.0&lt;/modelVersion</span></span><br><span class="line"><span class="meta">  	&lt;!--  继承父工程  --</span></span><br><span class="line"><span class="meta">    &lt;parent</span></span><br><span class="line"><span class="meta">        &lt;groupIdorg.springframework.boot&lt;/groupId</span></span><br><span class="line"><span class="meta">        &lt;artifactIdspring-boot-starter-parent&lt;/artifactId</span></span><br><span class="line"><span class="meta">        &lt;version2.6.2&lt;/version</span></span><br><span class="line"><span class="meta">        &lt;relativePath/ &lt;!-- lookup parent from repository --</span></span><br><span class="line"><span class="meta">    &lt;/parent</span></span><br><span class="line"><span class="meta">    &lt;groupIdcom.example&lt;/groupId</span></span><br><span class="line"><span class="meta">    &lt;artifactIdspringboot-study&lt;/artifactId</span></span><br><span class="line"><span class="meta">    &lt;version0.0.1-SNAPSHOT&lt;/version</span></span><br><span class="line"><span class="meta">    &lt;nameSpringBootTest&lt;/name</span></span><br><span class="line"><span class="meta">    &lt;descriptionSpringBootTest&lt;/description</span></span><br><span class="line"><span class="meta">    &lt;properties</span></span><br><span class="line"><span class="meta">        &lt;java.version1.8&lt;/java.version</span></span><br><span class="line"><span class="meta">    &lt;/properties</span></span><br><span class="line"><span class="meta">    &lt;dependencies</span></span><br><span class="line"><span class="meta">        &lt;!--  spring-boot-starter SpringBoot核心启动器  --</span></span><br><span class="line"><span class="meta">        &lt;dependency</span></span><br><span class="line"><span class="meta">            &lt;groupIdorg.springframework.boot&lt;/groupId</span></span><br><span class="line"><span class="meta">            &lt;artifactIdspring-boot-starter&lt;/artifactId</span></span><br><span class="line"><span class="meta">        &lt;/dependency</span></span><br><span class="line"><span class="meta">        &lt;!--  spring-boot-starter-test SpringBoot测试模块启动器  --</span></span><br><span class="line"><span class="meta">        &lt;dependency</span></span><br><span class="line"><span class="meta">            &lt;groupIdorg.springframework.boot&lt;/groupId</span></span><br><span class="line"><span class="meta">            &lt;artifactIdspring-boot-starter-test&lt;/artifactId</span></span><br><span class="line"><span class="meta">            &lt;scopetest&lt;/scope</span></span><br><span class="line"><span class="meta">        &lt;/dependency</span></span><br><span class="line"><span class="meta">    &lt;/dependencies</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">    &lt;build</span></span><br><span class="line"><span class="meta">        &lt;plugins</span></span><br><span class="line"><span class="meta">            &lt;!--  SpringBoot Maven插件，打包Jar都不用你操心了   --</span></span><br><span class="line"><span class="meta">            &lt;plugin</span></span><br><span class="line"><span class="meta">                &lt;groupIdorg.springframework.boot&lt;/groupId</span></span><br><span class="line"><span class="meta">                &lt;artifactIdspring-boot-maven-plugin&lt;/artifactId</span></span><br><span class="line"><span class="meta">            &lt;/plugin</span></span><br><span class="line"><span class="meta">        &lt;/plugins</span></span><br><span class="line"><span class="meta">    &lt;/build</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&lt;/project</span></span><br></pre></td></tr></table></figure></div>

<p><strong>除了以上这些文件以外，项目目录下还有</strong></p>
<ul>
<li>.gitignore  -  Git忽略名单</li>
<li>application.properties   -    SpringBoot的配置文件，所有依赖的配置都在这里编写，但是一般情况下只需要配置必要项即可。</li>
</ul>
<h1 id="SpringBoot的配置文件"><a href="#SpringBoot的配置文件" class="headerlink" title="SpringBoot的配置文件"></a>SpringBoot的配置文件</h1><p><code>application.properties</code>是整个SpringBoot的配置文件，除了使用<code>properties</code>格式以外，还有一种叫做<code>yaml</code>格式，SringBoot支持该格式</p>
<p>YML和properties格式的相互转换：<a class="link"   target="_blank" rel="noopener" href="https://www.toyaml.com/index.html" >https://www.toyaml.com/index.html <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>想要在编写配置文件的时候有相应的提示，可以添加以下依赖</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">groupIdorg.springframework.boot</span>&lt;/<span class="attr">groupId</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">artifactIdspring-boot-configuration-processor</span>&lt;/<span class="attr">artifactId</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">optionaltrue</span>&lt;/<span class="attr">optional</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">dependency</span></span></span><br></pre></td></tr></table></figure></div>

<h2 id="yml基本语法"><a href="#yml基本语法" class="headerlink" title="yml基本语法"></a>yml基本语法</h2><p><strong>什么是YML（或YMAL）</strong></p>
<p>YAML (YAML Ain’t a Markup Language)YAML不是一种标记语言，以.yml为后缀的文件，是一种直观的能够被电脑识别的数据序列化格式，并且容易被人类阅读，容易和脚本语言交互的，可以被支持YAML库的不同的编程语言程序导入，专门用来写配置文件的语言。</p>
<p>yml文件比xml更加简洁易读：</p>
<p>yml</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">student:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">sangeng</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">15</span></span><br></pre></td></tr></table></figure></div>

<p>在xml里这样表示</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">student</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">namesangeng</span>&lt;/<span class="attr">name</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">age15</span>&lt;/<span class="attr">age</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">student</span></span></span><br></pre></td></tr></table></figure></div>

<p><strong>约定</strong></p>
<ul>
<li><p>k: v 表示键值对关系，<strong>冒号后面必须有一个空格</strong></p>
</li>
<li><p>使用空格的缩进表示层级关系，空格数目不重要，<strong>只要是左对齐的一列数据，都是同一个层级的</strong></p>
</li>
<li><p>大小写敏感</p>
</li>
<li><p>缩进时<strong>不允许使用Tab键，只允许使用空格</strong>。</p>
</li>
<li><p>java中对于驼峰命名法，可用原名或使用-代替驼峰，如java中的lastName属性,在yml中使用lastName或 last-name都可正确映射。</p>
</li>
<li><p>yml中注释前面要加#</p>
</li>
</ul>
<p><strong>普通值(字面量)</strong></p>
<p>键名: 值</p>
<p>字符串默认不用加上单引号或者双引号</p>
<p>双引号:转义字符能够起作用(换行，…)</p>
<p>‘’：单引号；会转义特殊字符，特殊字符最终只是一个普通的字符串数据</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name1:</span> <span class="string">sangeng</span> </span><br><span class="line"><span class="attr">name2:</span> <span class="string">&#x27;sangeng  \n caotang&#x27;</span></span><br><span class="line"><span class="attr">name3:</span> <span class="string">&quot;sangeng  \n caotang&quot;</span></span><br><span class="line"><span class="attr">age:</span> <span class="number">15</span></span><br><span class="line"><span class="attr">flag:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></div>

<p><strong>日期</strong></p>
<p>用&#x2F;划分年月日</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">date:</span> <span class="number">2019</span><span class="string">/01/01</span></span><br></pre></td></tr></table></figure></div>

<p><strong>对象(属性和值)、Map(键值对)</strong></p>
<p>多行写法：</p>
<p>在下一行来写对象的属性和值的关系，注意缩进 </p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">student:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">zhangsan</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">20</span></span><br></pre></td></tr></table></figure></div>

<p>行内写法：</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">student:</span> &#123;<span class="attr">name:</span> <span class="string">zhangsan</span>,<span class="attr">age:</span> <span class="number">20</span>&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>数组、list、set</strong></p>
<p>用- 值表示数组中的一个元素 </p>
<p>多行写法：</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">dog</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">pig</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cat</span></span><br></pre></td></tr></table></figure></div>

<p>行内写法：</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pets:</span> [<span class="string">dog</span>,<span class="string">pig</span>,<span class="string">cat</span>]</span><br></pre></td></tr></table></figure></div>



<p><strong>对象数组、对象list、对象set</strong></p>
<p>可以多行写也可以行内写，比如下面这个例子，前两个对象是多行写法，最后一个对象是行内写法</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">students:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">zhangsan</span></span><br><span class="line">   <span class="attr">age:</span> <span class="number">22</span></span><br><span class="line"> <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">lisi</span></span><br><span class="line">   <span class="attr">age:</span> <span class="number">20</span></span><br><span class="line"> <span class="bullet">-</span> &#123;<span class="attr">name:</span> <span class="string">wangwu</span>,<span class="attr">age:</span> <span class="number">18</span>&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>占位符赋值</strong></p>
<p>使用 <strong>${key:defaultValue}</strong> 的方式来赋值，若key不存在，则会使用defaultValue来赋值。</p>
<p>例如</p>
<p>服务器的端口号会被自定义的myPort赋值，如果myPort没有，则是默认的88</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="string">$&#123;myPort:88&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">myPort:</span> <span class="number">80</span>   </span><br></pre></td></tr></table></figure></div>

<h2 id="SpringBoot读取配置文件"><a href="#SpringBoot读取配置文件" class="headerlink" title="SpringBoot读取配置文件"></a>SpringBoot读取配置文件</h2><h2 id="Value注入配置文件的值"><a href="#Value注入配置文件的值" class="headerlink" title="@Value注入配置文件的值"></a><code>@Value</code>注入配置文件的值</h2><p><em>注意：加了@Value的类必须是交由Spring容器管理的</em></p>
<p>​使用此注解只能获取简单类型的值（8种基本数据类型及其包装类，String,Date）</p>
<p>例如</p>
<p><code>MainController</code>类的属性data就会注入配置文件里的test.data的值，也就是data&#x3D;100</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">test：</span></span><br><span class="line">  <span class="attr">data:</span> <span class="number">100</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;test.data&#125;&quot;)</span></span><br><span class="line">    <span class="type">int</span> data;</span><br></pre></td></tr></table></figure></div>

<h2 id="ConfigurationProperties注入"><a href="#ConfigurationProperties注入" class="headerlink" title="@ConfigurationProperties注入"></a><code>@ConfigurationProperties</code>注入</h2><p><em>注意：对应的属性要有set&#x2F;get方法，并且key要和成员变量名一致才可以对应上</em></p>
<p>​yml配置</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">student:</span></span><br><span class="line">  <span class="attr">lastName:</span> <span class="string">sangeng</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">17</span></span><br><span class="line"><span class="attr">student2:</span></span><br><span class="line">  <span class="attr">lastName:</span> <span class="string">sangeng2</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">15</span></span><br></pre></td></tr></table></figure></div>

<p>​在类上添加注解<code>@Component</code>和<code>@ConfigurationProperties(prefix = &quot;配置前缀&quot;)</code></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;student&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>​从spring容器中获取Student对象</p>
<p>这时会发现这个对象的lastName是“sangeng”，age是17</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Student student;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(student);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hi&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="Web开发"><a href="#Web开发" class="headerlink" title="Web开发"></a>Web开发</h1><h2 id="整合Web相关框架"><a href="#整合Web相关框架" class="headerlink" title="整合Web相关框架"></a>整合Web相关框架</h2><p>SpringBoot会内嵌一个Tomcat服务器，也就是当Jar打包后，相当于就是一个可以直接运行的应用程序</p>
<p><strong>创建一个基于SpringBoot的Web应用程序</strong></p>
<p>只需导入web的starter（可以看到它包含了tomcat，json,SpringMVC等依赖）【也可以在创建项目的时候勾选“Spring Web”】</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span></span></span><br><span class="line"><span class="tag">        &lt;<span class="attr">groupIdorg.springframework.boot</span>&lt;/<span class="attr">groupId</span></span></span><br><span class="line"><span class="tag">        &lt;<span class="attr">artifactIdspring-boot-starter-web</span>&lt;/<span class="attr">artifactId</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">dependency</span></span></span><br></pre></td></tr></table></figure></div>

<p><strong>它是真的快</strong></p>
<p>创建完成后，直接开启项目，就可以直接访问：<a class="link"   target="_blank" rel="noopener" href="http://localhost:8080/" >http://localhost:8080/ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 。由于还没有编写任何的请求映射，所以没有数据。</p>
<p>看看日志：</p>
<p>日志中除了最基本的SpringBoot启动日志以外，还新增了内嵌Web服务器（Tomcat）的启动日志，并且显示了当前Web服务器所开放的端口，并且自动帮助我们初始化了DispatcherServlet（现在只是创建了项目，导入了web相关的starter依赖，没有进行任何的配置，实际上它使用的是starter提供的默认配置进行初始化的）</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">2022-01-06 22:17:46.308  INFO 853 --- [           main] c.example.SpringBootWebTestApplication   : Starting SpringBootWebTestApplication using Java 1.8.0_312 on NagodeMacBook-Pro.local with PID 853 (/Users/nagocoler/Downloads/SpringBootWebTest/target/classes started by nagocoler in /Users/nagocoler/Downloads/SpringBootWebTest)</span><br><span class="line">2022-01-06 22:17:46.309  INFO 853 --- [           main] c.example.SpringBootWebTestApplication   : No active profile set, falling back to default profiles: default</span><br><span class="line">2022-01-06 22:17:46.629  INFO 853 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)</span><br><span class="line">2022-01-06 22:17:46.632  INFO 853 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br><span class="line">2022-01-06 22:17:46.632  INFO 853 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]</span><br><span class="line">2022-01-06 22:17:46.654  INFO 853 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</span><br><span class="line">2022-01-06 22:17:46.654  INFO 853 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 325 ms</span><br><span class="line">2022-01-06 22:17:46.780  INFO 853 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#x27;&#x27;</span><br><span class="line">2022-01-06 22:17:46.785  INFO 853 --- [           main] c.example.SpringBootWebTestApplication   : Started SpringBootWebTestApplication in 0.62 seconds (JVM running for 0.999)</span><br><span class="line">2022-01-06 22:18:02.979  INFO 853 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#x27;dispatcherServlet&#x27;</span><br><span class="line">2022-01-06 22:18:02.979  INFO 853 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#x27;dispatcherServlet&#x27;</span><br><span class="line">2022-01-06 22:18:02.980  INFO 853 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms</span><br></pre></td></tr></table></figure></div>

<p>由于SpringBoot是自动扫描的，因此直接创建一个Controller即可被加载：</p>
<p>现在几乎没有做任何配置，但是可以直接开始配置Controller</p>
<p><em>注意：Controller一定要在启动类所在的包或者其子包下（否则会404，原因学到源码再说）</em></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainController</span> &#123;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">//直接访问http://localhost:8080/index即可，不用加web应用程序名称了</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/index&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;你好，欢迎访问主页！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>它还可以自动识别类型，如果返回的是一个对象类型的数据，那么它会自动转换为JSON数据格式，无需配置：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="type">int</span> sid;</span><br><span class="line">    String name;</span><br><span class="line">    String sex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/student&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> Student <span class="title function_">student</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">    student.setName(<span class="string">&quot;小明&quot;</span>);</span><br><span class="line">    student.setSex(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">    student.setSid(<span class="number">10</span>);</span><br><span class="line">    <span class="keyword">return</span> student;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>最后浏览器能够直接得到<code>application/json</code>的响应数据</p>
<h2 id="整合SpringSecurity依赖"><a href="#整合SpringSecurity依赖" class="headerlink" title="整合SpringSecurity依赖"></a>整合SpringSecurity依赖</h2><p>只需要导入SpringSecurity的Starter依赖即可：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">groupIdorg.springframework.boot</span>&lt;/<span class="attr">groupId</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">artifactIdspring-boot-starter-security</span>&lt;/<span class="attr">artifactId</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">dependency</span></span></span><br></pre></td></tr></table></figure></div>

<p>SpringSecurity会自动生成一个默认用户<code>user</code>，它的密码会出现在日志中：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">2022-01-06 23:10:51.329  INFO 2901 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br><span class="line">2022-01-06 23:10:51.329  INFO 2901 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]</span><br><span class="line">2022-01-06 23:10:51.350  INFO 2901 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</span><br><span class="line">2022-01-06 23:10:51.351  INFO 2901 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 341 ms</span><br><span class="line">2022-01-06 23:10:51.469  INFO 2901 --- [           main] .s.s.UserDetailsServiceAutoConfiguration : </span><br><span class="line"></span><br><span class="line">Using generated security password: ff24bee3-e1b7-4309-9609-d32618baf5cb</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<p><code>ff24bee3-e1b7-4309-9609-d32618baf5cb</code>就是随机生成的一个密码，可以使用此用户登录。</p>
<p>可以在配置文件中直接配置(实际上就是一个<code>inMemoryAuthentication</code>)：</p>
<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">security:</span></span><br><span class="line">    <span class="attr">user:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">test</span>   <span class="comment"># 用户名</span></span><br><span class="line">      <span class="attr">password:</span> <span class="number">123456</span>  <span class="comment"># 密码</span></span><br><span class="line">      <span class="attr">roles:</span>   <span class="comment"># 角色</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">user</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">admin</span></span><br></pre></td></tr></table></figure></div>

<p>页面的控制和数据库验证还是需要提供<code>WebSecurityConfigurerAdapter</code>的实现类去完成：</p>
<p><em>注意：这里不需要再添加<code>@EnableWebSecurity</code>了，因为starter依赖已经帮我们添加了。</em></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfiguration</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        http</span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                .antMatchers(<span class="string">&quot;/login&quot;</span>).permitAll()</span><br><span class="line">                .anyRequest().hasRole(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">                .and()</span><br><span class="line">                .formLogin();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>使用了SpringBoot之后，需要什么功能，只需要导入对应的starter依赖即可，甚至都不需要去进行额外的配置，只需要关注依赖本身的必要设置即可。</p>
<h2 id="整合junit"><a href="#整合junit" class="headerlink" title="整合junit"></a>整合junit</h2><p>使用SpringBoot整合Junit进行单元测试。</p>
<p>Spring Boot 2.2.0 版本开始引入 JUnit 5 作为单元测试默认库</p>
<h2 id="整合流程"><a href="#整合流程" class="headerlink" title="整合流程"></a>整合流程</h2><p>①添加依赖</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">groupIdorg.springframework.boot</span>&lt;/<span class="attr">groupId</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">artifactIdspring-boot-starter-test</span>&lt;/<span class="attr">artifactId</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">dependency</span></span></span><br></pre></td></tr></table></figure></div>

<p>②编写测试类</p>
<p>test.java.com.sangeng.ApplicationTest</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.sangeng.controller.HelloController;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApplicationTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> HelloController helloController;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testJunit</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="number">1</span>);</span><br><span class="line">        System.out.println(helloController);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><em>注意：测试类所在的包需要和启动类是在同一个包下。否则就要使用如下写法指定启动类</em></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.sangeng.controller.HelloController;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="comment">//classes属性来指定启动类</span></span><br><span class="line"><span class="meta">@SpringBootTest(classes = HelloApplication.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApplicationTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> HelloController helloController;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testJunit</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="number">1</span>);</span><br><span class="line">        System.out.println(helloController);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="兼容老版本"><a href="#兼容老版本" class="headerlink" title="兼容老版本"></a>兼容老版本</h2><p>由于Junit5和之前的Junit4有比较大的不同，如果对老项目中的SpringBoot进行了版本升级，那之前的单元测试代码会出现一些问题</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img%5Cjunit5.jpeg"
                      alt="img"
                > </p>
<p>从上图可以看出<strong>JUnit 5 &#x3D; JUnit Platform+JUnit Jupiter+JUnit Vintage</strong></p>
<ul>
<li><strong>JUnit Platform</strong>： 这是Junit提供的平台功能模块，通过它，其它的测试引擎也可以接入</li>
<li><strong>JUnit JUpiter</strong>：这是JUnit5的核心，是一个基于JUnit Platform的引擎实现，它包含许多丰富的新特性来使得自动化测试更加方便和强大。</li>
<li><strong>JUnit Vintage</strong>：这个模块是兼容JUnit3、JUnit4版本的测试引擎，使得旧版本的自动化测试也可以在JUnit5下正常运行。</li>
</ul>
<p>虽然Junit5包含了<strong>JUnit Vintage</strong>来兼容JUnit3和Junit4，但是<strong>SpringBoot 2.4 以上版本对应的spring-boot-starter-test移除了默认对Vintage 的依赖</strong>。</p>
<p>所以仅仅依赖spring-boot-starter-test时会发现之前使用的@Test注解和@RunWith注解都不能使用了。</p>
<p><strong>解决兼容问题</strong></p>
<p>添加依赖vintage来进行兼容。</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">groupIdorg.junit.vintage</span>&lt;/<span class="attr">groupId</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">artifactIdjunit-vintage-engine</span>&lt;/<span class="attr">artifactId</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">scopetest</span>&lt;/<span class="attr">scope</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">dependency</span></span></span><br></pre></td></tr></table></figure></div>

<p><em>注意：org.junit.Test对应的是Junit4的版本，就搭配@RunWith注解来使用</em></p>
<p>SpringBoot2.2.0之前版本的写法</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.sangeng.controller.HelloController;</span><br><span class="line"><span class="comment">//import org.junit.jupiter.api.Test;</span></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="comment">//classes属性来指定启动类</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApplicationTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> HelloController helloController;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testJunit</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="number">1</span>);</span><br><span class="line">        System.out.println(helloController);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="整合Mybatis框架"><a href="#整合Mybatis框架" class="headerlink" title="整合Mybatis框架"></a>整合Mybatis框架</h2><p><strong>先准备用于测试的数据</strong></p>
<p>①数据准备</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/*Table structure for table `user` */</span><br><span class="line">DROP TABLE IF EXISTS `user`;</span><br><span class="line">CREATE TABLE `user` (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `username` varchar(50) DEFAULT NULL,</span><br><span class="line">  `age` int(11) DEFAULT NULL,</span><br><span class="line">  `address` varchar(50) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">/*Data for the table `user` */</span><br><span class="line"></span><br><span class="line">insert  into `user`(`id`,`username`,`age`,`address`) values (2,&#x27;pdd&#x27;,25,&#x27;上海&#x27;),(3,&#x27;UZI&#x27;,19,&#x27;上海11&#x27;),(4,&#x27;RF&#x27;,19,NULL),(6,&#x27;三更&#x27;,14,&#x27;请问2&#x27;),(8,&#x27;test1&#x27;,11,&#x27;cc&#x27;),(9,&#x27;test2&#x27;,12,&#x27;cc2&#x27;);</span><br><span class="line"></span><br><span class="line">/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;</span><br><span class="line">/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;</span><br><span class="line">/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;</span><br><span class="line">/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;</span><br></pre></td></tr></table></figure></div>

<p>②实体类</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>整合Mybatis流程：</p>
<p><strong>①导入对应的starter依赖</strong></p>
<p>具体用哪个版本的Mybatis要看配置: <a class="link"   target="_blank" rel="noopener" href="https://github.com/mybatis/spring-boot-starter/" >https://github.com/mybatis/spring-boot-starter/ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis启动器--</span></span><br><span class="line"><span class="comment">&lt;dependency</span></span><br><span class="line"><span class="comment">    &lt;groupIdorg.mybatis.spring.boot&lt;/groupId</span></span><br><span class="line"><span class="comment">    &lt;artifactIdmybatis-spring-boot-starter&lt;/artifactId</span></span><br><span class="line"><span class="comment">    &lt;version2.2.0&lt;/version</span></span><br><span class="line"><span class="comment">&lt;/dependency</span></span><br><span class="line"><span class="comment">        &lt;!--mysql驱动--</span></span><br><span class="line"><span class="comment">&lt;dependency</span></span><br><span class="line"><span class="comment">    &lt;groupIdmysql&lt;/groupId</span></span><br><span class="line"><span class="comment">    &lt;artifactIdmysql-connector-java&lt;/artifactId</span></span><br><span class="line"><span class="comment">    &lt;version8.0.27&lt;/version</span></span><br><span class="line"><span class="comment">    &lt;scoperuntime&lt;/scope</span></span><br><span class="line"><span class="comment">&lt;/dependency</span></span><br></pre></td></tr></table></figure></div>

<p><strong>②配置<code>application.yml</code>文件</strong></p>
<ol>
<li>spring配置数据源</li>
<li>mybatis配置映射文件位置</li>
</ol>
<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_db?characterEncoding=utf-8&amp;serverTimezone=UTC&amp;&amp;useSSL=false</span> <span class="comment"># 第一个参数是数据库名称</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">cronaldo7</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*Mapper.xml</span> <span class="comment"># mapper映射文件路径，说明映射文件在resource/mapper包下，文件名都以Mapper.xml结尾</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.sangeng.domain</span>   <span class="comment"># 配置哪个包下的类有默认的别名</span></span><br></pre></td></tr></table></figure></div>

<p><strong>③编写mapper接口，需要添加<code>@Mapper</code>和<code>@Repository</code>注解（可以不加）</strong></p>
<p>导入依赖后，就不需要再去设置Mybatis的相关Bean了，也不需要添加任何<code>@MapperSacn</code>注解，因为starter已经帮助我们做了，它会自动扫描项目中添加了<code>@Mapper</code>注解的接口，直接将其注册为Bean，不需要进行任何配置。</p>
<p><em>当然，如果觉得每个接口都去加一个<code>@Mapper</code>比较麻烦的话，也可直接<code>@MapperScan</code>使用包扫描。</em></p>
<p><strong>④编写mapper接口对应的xml文件</strong></p>
<h2 id="整合Thymeleaf框架"><a href="#整合Thymeleaf框架" class="headerlink" title="整合Thymeleaf框架"></a>整合Thymeleaf框架</h2><p>整合Thymeleaf也只需导入对应的starter：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">groupIdorg.springframework.boot</span>&lt;/<span class="attr">groupId</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">artifactIdspring-boot-starter-thymeleaf</span>&lt;/<span class="attr">artifactId</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">dependency</span></span></span><br></pre></td></tr></table></figure></div>

<p>定义Controller</p>
<p>在controller中往域中存数据，并且跳转</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThymeleafController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserServcie userServcie;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/thymeleaf/users&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">users</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        <span class="comment">//获取数据</span></span><br><span class="line">        List&lt;<span class="type">User</span> <span class="variable">users</span> <span class="operator">=</span> userServcie.findAll();</span><br><span class="line">        <span class="comment">//望域中存入数据</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;users&quot;</span>,users);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;hello thymeleaf&quot;</span>);</span><br><span class="line">        <span class="comment">//页面跳转</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;table-standard&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>注意:这样只能正常解析HTML页面（放在Resource下的templates目录），但是js、css等静态资源（Resource下的static目录）需要进行路径指定，不然无法访问</p>
<p>在application.yml文件里配置静态资源的访问前缀：</p>
<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">	<span class="attr">mvc:</span></span><br><span class="line">  	<span class="attr">static-path-pattern:</span> <span class="string">/static/**</span></span><br></pre></td></tr></table></figure></div>

<p>也可以在使用thymeleaf的html文件里这么写：</p>
<ol>
<li>href,src都加上th:</li>
<li>资源路径加上@{}，以&#x2F;开头<br>@{&#x2F;app&#x2F;css&#x2F;bootstrap.css}就是引入resource&#x2F;static&#x2F;app&#x2F;css&#x2F;bootstrap.css</li>
</ol>
<div class="highlight-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/app/css/bootstrap.css&#125;&quot;</span></span></span><br><span class="line"><span class="tag">&lt;!<span class="attr">--</span> <span class="attr">Vendor</span> <span class="attr">CSS--</span></span></span><br><span class="line"><span class="tag">&lt;<span class="attr">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/vendor/fontawesome/css/font-awesome.min.css&#125;&quot;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="attr">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/vendor/animo/animate+animo.css&#125;&quot;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="attr">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/vendor/csspinner/csspinner.min.css&#125;&quot;</span></span></span><br><span class="line"><span class="tag">&lt;!<span class="attr">--</span> <span class="attr">START</span> <span class="attr">Page</span> <span class="attr">Custom</span> <span class="attr">CSS--</span></span></span><br><span class="line"><span class="tag">&lt;!<span class="attr">--</span> <span class="attr">END</span> <span class="attr">Page</span> <span class="attr">Custom</span> <span class="attr">CSS--</span></span></span><br><span class="line"><span class="tag">&lt;!<span class="attr">--</span> <span class="attr">App</span> <span class="attr">CSS--</span></span></span><br><span class="line"><span class="tag">&lt;<span class="attr">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/app/css/app.css&#125;&quot;</span></span></span><br><span class="line"><span class="tag">&lt;!<span class="attr">--</span> <span class="attr">Modernizr</span> <span class="attr">JS</span> <span class="attr">Script--</span></span></span><br><span class="line"><span class="tag">&lt;<span class="attr">script</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/vendor/modernizr/modernizr.js&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;application/javascript&quot;</span>&lt;/<span class="attr">script</span></span></span><br><span class="line"><span class="tag">&lt;!<span class="attr">--</span> <span class="attr">FastClick</span> <span class="attr">for</span> <span class="attr">mobiles--</span></span></span><br><span class="line"><span class="tag">&lt;<span class="attr">script</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/vendor/fastclick/fastclick.js&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;application/javascript&quot;</span>&lt;/<span class="attr">script</span></span></span><br></pre></td></tr></table></figure></div>

<p><strong>简单使用Thymeleaf</strong></p>
<p>在<strong>resources\templates</strong>下存放模板页面,htmL文件添加：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">http://www.thymeleaf.org</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:sec</span>=<span class="string">http://www.thymeleaf.org/extras/spring-security</span></span></span><br></pre></td></tr></table></figure></div>

<p>获取域中的name属性的值可以使用： ${name},注意要在th开头的属性中使用</p>
<div class="highlight-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">class</span>=<span class="string">&quot;no-ie&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">.....</span></span></span><br><span class="line"><span class="tag"> &lt;<span class="attr">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span><span class="attr">Kitchen</span> <span class="attr">Sink</span>&lt;/<span class="attr">div</span></span></span><br></pre></td></tr></table></figure></div>

<p>遍历语法：</p>
<p>th:each&#x3D;”自定义的元素变量名称 : ${集合变量名称}” </p>
<div class="highlight-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;user:$&#123;users&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.id&#125;&quot;</span>&lt;/<span class="attr">td</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.username&#125;&quot;</span>&lt;/<span class="attr">td</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.age&#125;&quot;</span>&lt;/<span class="attr">td</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.address&#125;&quot;</span>&lt;/<span class="attr">td</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">tr</span></span></span><br></pre></td></tr></table></figure></div>

<h2 id="访问静态资源"><a href="#访问静态资源" class="headerlink" title="访问静态资源"></a>访问静态资源</h2><p>​由于SpringBoot的项目是打成jar包的，所以没有之前web项目的那些web资源目录(webapps)。</p>
<p>官方文档规定把静态资源放到 <code>resources/static</code>(或者 <code>resources/public</code>或者<code>resources/resources</code>或者<code>resources/META-INF/resources</code>) 中</p>
<p>​静态资源放完后，</p>
<p>访问文件：resources&#x2F;static&#x2F;index.html  只需要在访问时资源路径写成&#x2F;index.html即可。  </p>
<p>​访问文件：resources&#x2F;static&#x2F;pages&#x2F;login.html  访问的资源路径写成： &#x2F;pages&#x2F;login.html</p>
<p><strong>修改静态资源访问路径</strong></p>
<p>​SpringBoot默认的静态资源路径匹配为&#x2F;** 。</p>
<p>可以通过<code>spring.mvc.static-path-pattern</code> 这个配置进行修改。</p>
<p>​例如想让访问静态资源的url必须有前缀&#x2F;res才能访问到static目录中的资源，那么可以修改如下：</p>
<p>在application.yml中(&#x2F;** 表示对当前目录及其子目录生效)</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">static-path-pattern:</span> <span class="string">/res/**</span> <span class="comment">#修改静态资源访问路径</span></span><br></pre></td></tr></table></figure></div>

<p>访问文件：resources&#x2F;static&#x2F;index.html  需要在访问时资源路径写成&#x2F;res&#x2F;index.html</p>
<p><strong>修改静态资源存放目录</strong></p>
<p>通过<code>spring.web.resources.static-locations</code>这个配置来修改静态资源的存放目录。</p>
<p>​例如:<br>静态资源就会放在resources&#x2F;sgstatic和resources&#x2F;static&#x2F;这两个目录下</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="attr">static-locations:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">classpath:/sgstatic/</span> </span><br><span class="line">        <span class="bullet">-</span> <span class="string">classpath:/static/</span></span><br></pre></td></tr></table></figure></div>

<h2 id="响应格式统一"><a href="#响应格式统一" class="headerlink" title="响应格式统一"></a>响应格式统一</h2><p>要保证一个项目中所有接口返回的数据格式的统一。这样无论是前端还是移动端开发获取到我们的数据后都能更方便的进行统一处理。</p>
<p><strong>​定义以下结果封装类</strong></p>
<p>com.sangeng.common.ResponseResult</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JsonInclude(JsonInclude.Include.NON_NULL)</span><span class="comment">//某个属性不为null，才会把它格式化转换成json</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseResult</span>&lt;T &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 状态码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 提示信息，如果有错误时，前端可以获取该字段进行提示</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询到的结果数据，</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ResponseResult</span><span class="params">(Integer code, String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ResponseResult</span><span class="params">(Integer code, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ResponseResult</span><span class="params">(Integer code, String msg, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="跨域请求"><a href="#跨域请求" class="headerlink" title="跨域请求"></a>跨域请求</h2><p><strong>什么是跨域</strong></p>
<p>​浏览器出于安全的考虑，使用XMLHttpRequest对象发起HTTP请求时必须遵守同源策略（协议，域名，端口号都一致才算同源），否则就是跨域的HTTP请求，默认情况下是被禁止的。</p>
<p><strong>CORS解决跨域</strong></p>
<p>​CORS是一个W3C标准，全称是”跨域资源共享”（Cross-origin resource sharing），允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。</p>
<p>​它通过服务器增加一个特殊的Header[Access-Control-Allow-Origin]来告诉客户端跨域的限制，如果浏览器支持CORS、并且判断Origin通过的话，就会允许XMLHttpRequest发起跨域请求。</p>
<p><strong>SpringBoot使用CORS解决跨域的两种方法</strong></p>
<p>两种方法本质上没区别：都是把<code>WebMvcConfigurer</code>的实现类注入到容器中，并且重写<code>addCorsMappings</code>方法<br>实际开发中方法二更加常用</p>
<p><em>方式一：使用@CrossOrigin</em></p>
<p>在支持跨域的方法或者是Controller上加上<code>@CrossOrigin</code>注解</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserServcie userServcie;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/findAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">findAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//调用service查询数据 ，进行返回</span></span><br><span class="line">        List&lt;<span class="type">User</span> <span class="variable">users</span> <span class="operator">=</span> userServcie.findAll();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseResult</span>(<span class="number">200</span>,users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>方法二：使用<code>WebMvcConfigurer</code>的<code>addCorsMappings</code>方法配置<code>CorsInterceptor</code>(这种更简便)</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CorsConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> &#123;</span><br><span class="line">      <span class="comment">// 设置允许跨域的路径</span></span><br><span class="line">        registry.addMapping(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                <span class="comment">// 设置允许跨域请求的域名</span></span><br><span class="line">                .allowedOriginPatterns(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">                <span class="comment">// 是否允许cookie</span></span><br><span class="line">                .allowCredentials(<span class="literal">true</span>)</span><br><span class="line">                <span class="comment">// 设置允许的请求方式</span></span><br><span class="line">                .allowedMethods(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>, <span class="string">&quot;DELETE&quot;</span>, <span class="string">&quot;PUT&quot;</span>)</span><br><span class="line">                <span class="comment">// 设置允许的header属性</span></span><br><span class="line">                .allowedHeaders(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">                <span class="comment">// 跨域允许时间</span></span><br><span class="line">                .maxAge(<span class="number">3600</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>原理</strong>：</p>
<h2 id="ControllerAdvice统一异常处理（和SpringMVC一样）"><a href="#ControllerAdvice统一异常处理（和SpringMVC一样）" class="headerlink" title="@ControllerAdvice统一异常处理（和SpringMVC一样）"></a><code>@ControllerAdvice</code>统一异常处理（和SpringMVC一样）</h2><p>这一部分和SpringMVC的一样，那里更详细</p>
<p>前后端分离的项目中，异常处理一般是把异常信息封装到Json中写入响应体。无论是哪种情况</p>
<p><strong>自定义一个异常处理控制器</strong></p>
<ol>
<li>这个类要添加<code>@ControllerAdvice</code>注解</li>
<li>在类上加<code>@Component</code>注解注入容器，注意要保证类能被组件扫描到。</li>
<li>处理异常的方法添加<code>@ExceptionHandler(异常类型.class)</code>注解，标识可以处理的异常</li>
</ol>
<p><strong>例子（前后端分离的项目：把异常信息封装为对象，转换成json写入响应体）</strong></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyControllerAdvice</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(RuntimeException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">handlerException</span><span class="params">(Exception e)</span>&#123;</span><br><span class="line">        <span class="comment">//获取异常信息，存入ResponseResult的msg属性</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> e.getMessage();</span><br><span class="line">        <span class="type">ResponseResult</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseResult</span>(<span class="number">300</span>,message);<span class="comment">//实际项目中300设为常量，易维护</span></span><br><span class="line">        <span class="comment">//把ResponseResult作为返回值返回，要求到时候转换成json存入响应体中</span></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="获取web原生对象（了解）"><a href="#获取web原生对象（了解）" class="headerlink" title="获取web原生对象（了解）"></a>获取web原生对象（了解）</h2><p>在web阶段经常要使用到request，response，session等对象。</p>
<p>通过SpringMVC也可以获取到这些对象。</p>
<p><em>注：在MVC中很少获取这些对象了，因为有更简便的方式（获取参数，请求头，往响应体写数据等等操作，都有对应的注解方便开发）来避免使用这些原生对象相对繁琐的API</em></p>
<p><strong>只需要在方法上添加对应类型的参数即可</strong></p>
<p>SpringMVC会把需要的对象传给形参</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getRequestAndResponse&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">getRequestAndResponse</span><span class="params">(HttpServletRequest request, HttpServletResponse response, HttpSession session)</span>&#123;</span><br><span class="line">        System.out.println(request);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseResult</span>(<span class="number">200</span>,<span class="string">&quot;成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="自定义参数解析"><a href="#自定义参数解析" class="headerlink" title="自定义参数解析"></a>自定义参数解析</h2><p>如果想实现像获取请求体中的数据那样(在Handler方法的参数上增加一个@RepuestBody注解就可以获取到对应的数据),就可以使用HandlerMethodArgumentResolver来实现自定义的参数解析。</p>
<p>①定义用来标识的注解</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.PARAMETER)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> CurrentUserId &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>②创建类实现HandlerMethodArgumentResolver接口并重写其中的方法</p>
<p><strong>注意加上@Component注解注入Spring容器</strong></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserIdArgumentResolver</span> <span class="keyword">implements</span> <span class="title class_">HandlerMethodArgumentResolver</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断方法参数使用能使用当前的参数解析器进行解析</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">supportsParameter</span><span class="params">(MethodParameter parameter)</span> &#123;</span><br><span class="line">        <span class="comment">//如果方法参数有加上CurrentUserId注解，就能把被我们的解析器解析</span></span><br><span class="line">        <span class="keyword">return</span> parameter.hasParameterAnnotation(CurrentUserId.class);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//进行参数解析的方法，可以在方法中获取对应的数据，然后把数据作为返回值返回。方法的返回值就会赋值给对应的方法参数</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">resolveArgument</span><span class="params">(MethodParameter parameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//获取请求头中的token</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> webRequest.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(StringUtils.hasText(token))&#123;</span><br><span class="line">            <span class="comment">//解析token，获取userId</span></span><br><span class="line">            <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> JwtUtil.parseJWT(token);</span><br><span class="line">            <span class="type">String</span> <span class="variable">userId</span> <span class="operator">=</span> claims.getSubject();</span><br><span class="line">            <span class="comment">//返回结果</span></span><br><span class="line">            <span class="keyword">return</span> userId;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>③配置参数解析器</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArgumentResolverConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserIdArgumentResolver userIdArgumentResolver;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addArgumentResolvers</span><span class="params">(List&lt;HandlerMethodArgumentResolver resolvers)</span> &#123;</span><br><span class="line">        resolvers.add(userIdArgumentResolver);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>④测试</p>
<p>在需要获取UserId的方法中增加对应的方法参数然后使用@CurrentUserId进行标识即可获取到数据</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="comment">//@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserServcie userServcie;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/findAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">findAll</span><span class="params">(<span class="meta">@CurrentUserId</span> String userId)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(userId);</span><br><span class="line">        <span class="comment">//调用service查询数据 ，进行返回s</span></span><br><span class="line">        List&lt;<span class="type">User</span> <span class="variable">users</span> <span class="operator">=</span> userServcie.findAll();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseResult</span>(<span class="number">200</span>,users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="开启声明式事务"><a href="#开启声明式事务" class="headerlink" title="开启声明式事务"></a>开启声明式事务</h2><p>直接在需要事务控制的方法上加上对应的注解<code>@Transactional</code></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserServcie</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//添加2个用户到数据库</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="literal">null</span>,<span class="string">&quot;sg666&quot;</span>,<span class="number">15</span>,<span class="string">&quot;上海&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="literal">null</span>,<span class="string">&quot;sg777&quot;</span>,<span class="number">16</span>,<span class="string">&quot;北京&quot;</span>);</span><br><span class="line">        userMapper.insertUser(user);</span><br><span class="line">        System.out.println(<span class="number">1</span>/<span class="number">0</span>);</span><br><span class="line">        userMapper.insertUser(user2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><p>SpringBoot中默认是开启AOP功能的。如果不想开启AOP功能可以使用如下配置设置为false</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">aop:</span></span><br><span class="line">    <span class="attr">auto:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></div>

<h2 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h2><p>①添加依赖</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">groupIdorg.springframework.boot</span>&lt;/<span class="attr">groupId</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">artifactIdspring-boot-starter-aop</span>&lt;/<span class="attr">artifactId</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">dependency</span></span></span><br></pre></td></tr></table></figure></div>

<p>②自定义注解</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> InvokeLog &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>③定义切面类</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span>  <span class="comment">//标识这是一个切面类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InvokeLogAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//确定切点</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(com.sangeng.aop.InvokeLog)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">printInvokeLog</span><span class="params">(ProceedingJoinPoint joinPoint)</span>&#123;</span><br><span class="line">        <span class="comment">//目标方法调用前</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">proceed</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">MethodSignature</span> <span class="variable">signature</span> <span class="operator">=</span> (MethodSignature) joinPoint.getSignature();</span><br><span class="line">        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> signature.getMethod().getName();</span><br><span class="line">        System.out.println(methodName+<span class="string">&quot;即将被调用&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            proceed = joinPoint.proceed();</span><br><span class="line">            <span class="comment">//目标方法调用后</span></span><br><span class="line">            System.out.println(methodName+<span class="string">&quot;被调用完了&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable throwable) &#123;</span><br><span class="line">            throwable.printStackTrace();</span><br><span class="line">            <span class="comment">//目标方法出现异常了</span></span><br><span class="line">            System.out.println(methodName+<span class="string">&quot;出现了异常&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> proceed;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>④在需要正确的地方增加对应的注解</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserServcie</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@InvokeLog</span>  <span class="comment">//需要被增强方法需要加上对应的注解</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="切换动态代理"><a href="#切换动态代理" class="headerlink" title="切换动态代理"></a>切换动态代理</h2><p>有的时候我们需要修改AOP的代理方式。</p>
<p>可以使用以下方式修改：</p>
<p>配置文件中配置spring.aop.proxy-target-class为false可以切换为使用jdk动态代理。该配置默认值为true，使用cglib动态代理。</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">aop:</span></span><br><span class="line">    <span class="attr">proxy-target-class:</span> <span class="literal">false</span> <span class="comment">#切换为jdk动态代理的方式</span></span><br></pre></td></tr></table></figure></div>

<p>也可以这么写：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy(proxyTargetClass = false)</span><span class="comment">//修改代理方式</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> SpringApplication.run(WebApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="日志系统"><a href="#日志系统" class="headerlink" title="日志系统"></a>日志系统</h1><p>SpringBoot提供了丰富的日志系统，它几乎是开箱即用的。</p>
<h2 id="开启日志"><a href="#开启日志" class="headerlink" title="开启日志"></a>开启日志</h2><p>开启日志</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">debug:</span> <span class="literal">true</span> <span class="comment">#开启日志</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.sangeng:</span> <span class="string">debug</span> <span class="comment">#设置日志级别</span></span><br></pre></td></tr></table></figure></div>

<h2 id="花里胡哨"><a href="#花里胡哨" class="headerlink" title="花里胡哨"></a>花里胡哨</h2><h2 id="日志门面和日志实现"><a href="#日志门面和日志实现" class="headerlink" title="日志门面和日志实现"></a>日志门面和日志实现</h2><p>首先要区分一下，什么是日志门面（Facade）什么是日志实现。</p>
<p>之前学习的JUL实际上就是一种日志实现，可以直接使用JUL提供的日志框架来规范化打印日志</p>
<p>而日志门面，如Slf4j，是把不同的日志系统的实现进行了具体的抽象化，只提供了统一的日志使用接口，使用时只需要按照其提供的接口方法进行调用即可。由于它只是一个接口，并不是一个具体的可以直接单独使用的日志框架，所以最终日志的格式、记录级别、输出方式等都要通过接口绑定的具体的日志系统（log4j、logback、java.util.logging等）来实现</p>
<p>日志门面和日志实现就像JDBC和数据库驱动一样，一个是画大饼的，一个是真的去做饼的。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://upload-images.jianshu.io/upload_images/2909474-b5127a18b3eda3ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/888"
                      alt="img"
                ></p>
<p>现在有一个问题：不同的框架可能使用了不同的日志框架，这个时候出现众多日志框架并存的情况。</p>
<p>现在希望的是所有的框架一律使用日志门面（Slf4j）进行日志打印，该怎么去解决？（将其他框架依赖的日志框架直接更换为Slf4j是不现实的）</p>
<p>这时，可以采取类似于偷梁换柱的做法，只保留不同日志框架的接口和类定义等关键信息，而将实现全部定向为Slf4j调用。相当于有着和原有日志框架一样的外壳，对于其他框架来说依然可以使用对应的类进行操作，而具体如何执行，真正的内心已经是Slf4j的了。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://upload-images.jianshu.io/upload_images/2909474-512f5cca92e05e59.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/928"
                      alt="img"
                ></p>
<p>所以，SpringBoot为了统一日志框架的使用，做了这些事情：</p>
<ul>
<li>直接将其他依赖以前的日志框架剔除</li>
<li>导入对应日志框架的Slf4j中间包</li>
<li>导入自己官方指定的日志实现，并作为Slf4j的日志实现层</li>
</ul>
<h2 id="在SpringBoot中打印日志信息"><a href="#在SpringBoot中打印日志信息" class="headerlink" title="在SpringBoot中打印日志信息"></a>在SpringBoot中打印日志信息</h2><p>SpringBoot使用的是Slf4j作为日志门面，Logback（<a class="link"   target="_blank" rel="noopener" href="http://logback.qos.ch/" >Logback <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 是log4j 框架的作者开发的新一代日志框架，它效率更高、能够适应诸多的运行环境，同时天然支持SLF4J）作为日志实现，对应的依赖为：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">groupIdorg.springframework.boot</span>&lt;/<span class="attr">groupId</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">artifactIdspring-boot-starter-logging</span>&lt;/<span class="attr">artifactId</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">dependency</span></span></span><br></pre></td></tr></table></figure></div>

<p>如果需要打印日志，可以像这样：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">login</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(MainController.class);</span><br><span class="line">    logger.info(<span class="string">&quot;用户访问了一次登陆界面&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>也可以使用Lombok的<code>@Slf4j</code>一个注解搞定</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;用户访问了一次登陆界面&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<p>日志级别从低到高分为TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL，SpringBoot默认只会打印INFO以上级别的信息。</p>
<h2 id="配置Logback日志"><a href="#配置Logback日志" class="headerlink" title="配置Logback日志"></a>配置Logback日志</h2><p>Logback官网：<a class="link"   target="_blank" rel="noopener" href="https://logback.qos.ch/" >https://logback.qos.ch <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>和JUL一样，Logback也能通过编写对应的配置文件实现定制化。SpringBoot推荐将配置文件名称命名为<code>logback-spring.xml</code>表示这是SpringBoot下Logback专用的配置，可以使用SpringBoot 的高级Profile功能，它的内容类似于这样：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?</span></span><br><span class="line"><span class="meta">&lt;configuration</span></span><br><span class="line"><span class="meta">    &lt;!-- 配置 --</span></span><br><span class="line"><span class="meta">&lt;/configuration</span></span><br></pre></td></tr></table></figure></div>

<p>最外层由<code>configuration</code>包裹，一旦编写，那么就会替换默认的配置。所以如果内部什么都不写的话，那么会导致我们的SpringBoot项目没有配置任何日志输出方式，控制台也不会打印日志。</p>
<p><strong>在<code>logback-spring.xml</code>配置一个控制台日志打印</strong>：</p>
<p>直接导入并使用SpringBoot预设好的日志格式：<code>org/springframework/boot/logging/logback/defaults.xml</code>，然后设置对应的<code>appender</code>即可：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?</span></span><br><span class="line"><span class="meta">&lt;configuration</span></span><br><span class="line"><span class="meta">    &lt;!--  导入其他配置文件，作为预设  --</span></span><br><span class="line"><span class="meta">    &lt;include resource=<span class="string">&quot;org/springframework/boot/logging/logback/defaults.xml&quot;</span> /</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">    &lt;!--  Appender作为日志打印器配置，这里命名随意  --</span></span><br><span class="line"><span class="meta">    &lt;!--  ch.qos.logback.core.ConsoleAppender是专用于控制台的Appender  --</span></span><br><span class="line"><span class="meta">    &lt;appender name=<span class="string">&quot;CONSOLE&quot;</span> class=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span></span></span><br><span class="line"><span class="meta">        &lt;encoder</span></span><br><span class="line"><span class="meta">            &lt;pattern$&#123;CONSOLE_LOG_PATTERN&#125;&lt;/pattern</span></span><br><span class="line"><span class="meta">            &lt;charset$&#123;CONSOLE_LOG_CHARSET&#125;&lt;/charset</span></span><br><span class="line"><span class="meta">        &lt;/encoder</span></span><br><span class="line"><span class="meta">    &lt;/appender</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">    &lt;!--  指定日志输出级别，以及启用的Appender，这里就使用了我们上面的ConsoleAppender  --</span></span><br><span class="line"><span class="meta">    &lt;root level=<span class="string">&quot;INFO&quot;</span></span></span><br><span class="line"><span class="meta">        &lt;appender-ref ref=<span class="string">&quot;CONSOLE&quot;</span>/</span></span><br><span class="line"><span class="meta">    &lt;/root</span></span><br><span class="line"><span class="meta">&lt;/configuration</span></span><br></pre></td></tr></table></figure></div>

<p>配置完成后，控制台已经可以正常打印日志信息了。</p>
<p><strong>开启文件打印</strong>：</p>
<p>只需要再配置一个对应的Appender即可：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  ch.qos.logback.core.rolling.RollingFileAppender用于文件日志记录，它支持滚动  --</span></span><br><span class="line"><span class="comment">&lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span></span><br><span class="line"><span class="comment">    &lt;encoder</span></span><br><span class="line"><span class="comment">        &lt;pattern$&#123;FILE_LOG_PATTERN&#125;&lt;/pattern</span></span><br><span class="line"><span class="comment">        &lt;charset$&#123;FILE_LOG_CHARSET&#125;&lt;/charset</span></span><br><span class="line"><span class="comment">    &lt;/encoder</span></span><br><span class="line"><span class="comment">    &lt;!--  自定义滚动策略，防止日志文件无限变大，也就是日志文件写到什么时候为止，重新创建一个新的日志文件开始写  --</span></span><br><span class="line"><span class="comment">    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;</span></span><br><span class="line"><span class="comment">        &lt;!--  文件保存位置以及文件命名规则，这里用到了%d&#123;yyyy-MM-dd&#125;表示当前日期，%i表示这一天的第N个日志  --</span></span><br><span class="line"><span class="comment">        &lt;FileNamePatternlog/%d&#123;yyyy-MM-dd&#125;-spring-%i.log&lt;/FileNamePattern</span></span><br><span class="line"><span class="comment">        &lt;!--  到期自动清理日志文件  --</span></span><br><span class="line"><span class="comment">        &lt;cleanHistoryOnStarttrue&lt;/cleanHistoryOnStart</span></span><br><span class="line"><span class="comment">        &lt;!--  最大日志保留时间  --</span></span><br><span class="line"><span class="comment">        &lt;maxHistory7&lt;/maxHistory</span></span><br><span class="line"><span class="comment">        &lt;!--  最大单个日志文件大小  --</span></span><br><span class="line"><span class="comment">        &lt;maxFileSize10MB&lt;/maxFileSize</span></span><br><span class="line"><span class="comment">    &lt;/rollingPolicy</span></span><br><span class="line"><span class="comment">&lt;/appender</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&lt;!--  指定日志输出级别，以及启用的Appender，这里就使用了我们上面的ConsoleAppender  --</span></span><br><span class="line"><span class="comment">&lt;root level=&quot;INFO&quot;</span></span><br><span class="line"><span class="comment">    &lt;appender-ref ref=&quot;CONSOLE&quot;/</span></span><br><span class="line"><span class="comment">    &lt;appender-ref ref=&quot;FILE&quot;/</span></span><br><span class="line"><span class="comment">&lt;/root</span></span><br></pre></td></tr></table></figure></div>

<p>配置完成后，日志文件也能自动生成了。</p>
<p>我们也可以魔改官方提供的日志格式，官方文档：<a class="link"   target="_blank" rel="noopener" href="https://logback.qos.ch/manual/layouts.html" >https://logback.qos.ch/manual/layouts.html <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>这里需要提及的是MDC机制，Logback内置的日志字段还是比较少，如果需要打印有关业务的更多的内容，包括自定义的一些数据，需要借助logback MDC机制，MDC为“Mapped Diagnostic Context”（映射诊断上下文），即将一些运行时的上下文数据通过logback打印出来；此时需要借助org.sl4j.MDC类。</p>
<p>比如现在需要记录是哪个用户访问我们网站的日志，只要是此用户访问我们网站，都会在日志中携带该用户的ID，我们希望每条日志中都携带这样一段信息文本，而官方提供的字段无法实现此功能，这时就需要使用MDC机制：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">()</span>&#123;</span><br><span class="line">      	<span class="comment">//这里就用Session代替ID吧</span></span><br><span class="line">        MDC.put(<span class="string">&quot;reqId&quot;</span>, request.getSession().getId());</span><br><span class="line">        log.info(<span class="string">&quot;用户访问了一次登陆界面&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<p>通过这种方式，就可以向日志中传入自定义参数了，日志中添加这样一个占位符<code>%X&#123;键值&#125;</code>，名字保持一致：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%clr([%X&#123;reqId&#125;])&#123;faint&#125; </span><br></pre></td></tr></table></figure></div>

<p>这样当我们向MDC中添加信息后，只要是当前线程（本质是ThreadLocal实现）下输出的日志，都会自动替换占位符。</p>
<h2 id="自定义Banner"><a href="#自定义Banner" class="headerlink" title="自定义Banner"></a>自定义Banner</h2><p>Banner部分和日志部分是独立的，SpringBoot启动后，会先打印Banner部分，这个Banner部分也是可以自定义的。</p>
<p>直接在配置文件所在目录下创建一个名为<code>banner.txt</code>的文本文档，内容随便</p>
<div class="highlight-container" data-rel="Txt"><figure class="iseeu highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//                          _ooOoo_                               //</span><br><span class="line">//                         o8888888o                              //</span><br><span class="line">//                         88&quot; . &quot;88                              //</span><br><span class="line">//                         (| ^_^ |)                              //</span><br><span class="line">//                         O\  =  /O                              //</span><br><span class="line">//                      ____/`---&#x27;\____                           //</span><br><span class="line">//                    .&#x27;  \\|     |//  `.                         //</span><br><span class="line">//                   /  \\|||  :  |||//  \                        //</span><br><span class="line">//                  /  _||||| -:- |||||-  \                       //</span><br><span class="line">//                  |   | \\\  -  /// |   |                       //</span><br><span class="line">//                  | \_|  &#x27;&#x27;\---/&#x27;&#x27;  |   |                       //</span><br><span class="line">//                  \  .-\__  `-`  ___/-. /                       //</span><br><span class="line">//                ___`. .&#x27;  /--.--\  `. . ___                     //</span><br><span class="line">//              .&quot;&quot; &#x27;&lt;  `.___\_&lt;|_/___.&#x27;  &#x27;&quot;&quot;.                  //</span><br><span class="line">//            | | :  `- \`.;`\ _ /`;.`/ - ` : | |                 //</span><br><span class="line">//            \  \ `-.   \_ __\ /__ _/   .-` /  /                 //</span><br><span class="line">//      ========`-.____`-.___\_____/___.-`____.-&#x27;========         //</span><br><span class="line">//                           `=---=&#x27;                              //</span><br><span class="line">//      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^        //</span><br><span class="line">//             佛祖保佑          永无BUG         永不修改             //</span><br></pre></td></tr></table></figure></div>

<p>可以使用在线生成网站进行生成自己的个性Banner：<a class="link"   target="_blank" rel="noopener" href="https://www.bootschool.net/ascii" >https://www.bootschool.net/ascii <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>甚至还可以使用颜色代码来为文本切换颜色：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;AnsiColor.BRIGHT_GREEN&#125;  //绿色</span><br></pre></td></tr></table></figure></div>

<p>也可以获取一些常用的变量信息：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;AnsiColor.YELLOW&#125; 当前 Spring Boot 版本：$&#123;spring-boot.version&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="多环境配置"><a href="#多环境配置" class="headerlink" title="多环境配置"></a>多环境配置</h1><p>在日常开发中，项目会有多个环境。例如开发环境（develop）也就是研发过程中疯狂敲代码修BUG阶段，生产环境（production ）就是项目开发得差不多了，可以放在服务器上跑了。</p>
<p>不同的环境下，可能配置文件也存在不同（端口、上下文路径、数据库配置等等），但是又不可能切换环境的时候又去重新写一次配置文件（麻烦）。</p>
<p><strong>为什么用profile</strong></p>
<p>profile的出现就是为了解决这个问题。可以把不同环境下不同的配置放到对应的profile文件中，然后把不同环境下都相同的配置放到application.yml文件中。</p>
<p><strong>如何进行自由切换</strong></p>
<p>分别创建两个环境的profile配置文件：<code>application-dev.yml</code>和<code>application-prod.yml</code>，分别表示开发环境和生产环境的配置文件。</p>
<p>比如开发环境使用的服务器端口为8080，而生产环境下可能就需要设置为80或是443端口，那么这个时候就需要不同环境下的配置文件进行区分：</p>
<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure></div>

<p>然后在<code>application.yml</code>配置文件指定目前使用的是<code>application-dev.yml</code></p>
<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure></div>

<p>也可以使用虚拟机参数来指定激活环境。例如：-Dspring.profiles.active&#x3D;dev</p>
<p>​也可以使用命令行参数来激活环境。例如：–spring.profiles.active &#x3D;dev</p>
<p><strong>SpringBoot自带的Logback日志系统也是支持多环境配置的</strong></p>
<p>比如现在希望开发环境（dev）下输出日志到控制台，而生产环境（prod）下只需要输出到文件即可，这时就需要进行环境配置：</p>
<p>在<code>logback-spring.xml</code>添加以下内容(<em>注意：<code>springProfile</code>是区分大小写的！</em>)</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">&quot;dev&quot;</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span></span></span><br><span class="line"><span class="tag">        &lt;<span class="attr">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span>/</span></span><br><span class="line"><span class="tag">        &lt;<span class="attr">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/</span></span><br><span class="line"><span class="tag">    &lt;/<span class="attr">root</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">springProfile</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">&lt;<span class="attr">springProfile</span> <span class="attr">name</span>=<span class="string">&quot;prod&quot;</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span></span></span><br><span class="line"><span class="tag">        &lt;<span class="attr">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/</span></span><br><span class="line"><span class="tag">    &lt;/<span class="attr">root</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">springProfile</span></span></span><br></pre></td></tr></table></figure></div>

<p><strong>打包问题</strong></p>
<p>目前虽然可以切换开发环境，但是打包的时候依然是所有配置文件全部打包，如果希望生产环境中不要打包开发环境下的配置文件，就只能找Maven解决</p>
<p>修改<code>pom.xml</code>：</p>
<p>先添加环境</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--分别设置开发，生产环境--</span></span><br><span class="line"><span class="comment">&lt;profiles</span></span><br><span class="line"><span class="comment">    &lt;!-- 开发环境 --</span></span><br><span class="line"><span class="comment">    &lt;profile</span></span><br><span class="line"><span class="comment">        &lt;iddev&lt;/id</span></span><br><span class="line"><span class="comment">        &lt;activation</span></span><br><span class="line"><span class="comment">            &lt;activeByDefaulttrue&lt;/activeByDefault</span></span><br><span class="line"><span class="comment">        &lt;/activation</span></span><br><span class="line"><span class="comment">        &lt;properties</span></span><br><span class="line"><span class="comment">            &lt;environmentdev&lt;/environment</span></span><br><span class="line"><span class="comment">        &lt;/properties</span></span><br><span class="line"><span class="comment">    &lt;/profile</span></span><br><span class="line"><span class="comment">    &lt;!-- 生产环境 --</span></span><br><span class="line"><span class="comment">    &lt;profile</span></span><br><span class="line"><span class="comment">        &lt;idprod&lt;/id</span></span><br><span class="line"><span class="comment">        &lt;activation</span></span><br><span class="line"><span class="comment">            &lt;activeByDefaultfalse&lt;/activeByDefault</span></span><br><span class="line"><span class="comment">        &lt;/activation</span></span><br><span class="line"><span class="comment">        &lt;properties</span></span><br><span class="line"><span class="comment">            &lt;environmentprod&lt;/environment</span></span><br><span class="line"><span class="comment">        &lt;/properties</span></span><br><span class="line"><span class="comment">    &lt;/profile</span></span><br><span class="line"><span class="comment">&lt;/profiles</span></span><br></pre></td></tr></table></figure></div>

<p>接着，根据环境的不同，排除其他环境的配置文件：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span></span></span><br><span class="line"><span class="tag">&lt;!<span class="attr">--排除配置文件--</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">resource</span></span></span><br><span class="line"><span class="tag">        &lt;<span class="attr">directorysrc</span>/<span class="attr">main</span>/<span class="attr">resources</span>&lt;/<span class="attr">directory</span></span></span><br><span class="line"><span class="tag">        &lt;!<span class="attr">--先排除所有的配置文件--</span></span></span><br><span class="line"><span class="tag">        &lt;<span class="attr">excludes</span></span></span><br><span class="line"><span class="tag">            &lt;!<span class="attr">--使用通配符</span>，<span class="attr">当然可以定义多个exclude标签进行排除--</span></span></span><br><span class="line"><span class="tag">            &lt;<span class="attr">excludeapplication</span>*<span class="attr">.yml</span>&lt;/<span class="attr">exclude</span></span></span><br><span class="line"><span class="tag">        &lt;/<span class="attr">excludes</span></span></span><br><span class="line"><span class="tag">    &lt;/<span class="attr">resource</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    &lt;!<span class="attr">--根据激活条件引入打包所需的配置和文件--</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">resource</span></span></span><br><span class="line"><span class="tag">        &lt;<span class="attr">directorysrc</span>/<span class="attr">main</span>/<span class="attr">resources</span>&lt;/<span class="attr">directory</span></span></span><br><span class="line"><span class="tag">        &lt;!<span class="attr">--引入所需环境的配置文件--</span></span></span><br><span class="line"><span class="tag">        &lt;<span class="attr">filteringtrue</span>&lt;/<span class="attr">filtering</span></span></span><br><span class="line"><span class="tag">        &lt;<span class="attr">includes</span></span></span><br><span class="line"><span class="tag">            &lt;<span class="attr">includeapplication.yml</span>&lt;/<span class="attr">include</span></span></span><br><span class="line"><span class="tag">            &lt;!<span class="attr">--根据maven选择环境导入配置文件--</span></span></span><br><span class="line"><span class="tag">            &lt;<span class="attr">includeapplication-</span>$&#123;<span class="attr">environment</span>&#125;<span class="attr">.yml</span>&lt;/<span class="attr">include</span></span></span><br><span class="line"><span class="tag">        &lt;/<span class="attr">includes</span></span></span><br><span class="line"><span class="tag">    &lt;/<span class="attr">resource</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">resources</span></span></span><br></pre></td></tr></table></figure></div>

<p>最后将Maven中的<code>environment</code>属性，传递给SpringBoot的配置文件<code>application.yml</code>，在构建时替换为对应的值：</p>
<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">&#x27;@environment@&#x27;</span>  <span class="comment">#注意YAML配置文件需要加单引号，否则会报错</span></span><br></pre></td></tr></table></figure></div>

<p>这样，根据Maven环境的切换，SpringBoot的配置文件也会进行对应的切换。</p>
<p>打开Maven栏目，直接勾选即可实现开发环境的自由切换了。</p>
<p><em>注意切换环境之后要重新加载一下Maven项目，不然不会生效！</em></p>
<h1 id="邮件功能"><a href="#邮件功能" class="headerlink" title="邮件功能"></a>邮件功能</h1><h2 id="邮件Mail"><a href="#邮件Mail" class="headerlink" title="邮件Mail"></a>邮件Mail</h2><p>很多的网站中，都会遇到邮件或是手机号验证，也就是通过你的邮箱或是手机短信去接受网站发给你的注册验证信息，填写验证码之后，就可以完成注册了，同时，网站也会绑定你的手机号或是邮箱。</p>
<p>像这样的功能，SpringBoot已经提供了封装好的邮件模块使用：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">groupIdorg.springframework.boot</span>&lt;/<span class="attr">groupId</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">artifactIdspring-boot-starter-mail</span>&lt;/<span class="attr">artifactId</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">dependency</span></span></span><br></pre></td></tr></table></figure></div>

<h2 id="了解电子邮件"><a href="#了解电子邮件" class="headerlink" title="了解电子邮件"></a>了解电子邮件</h2><p>电子邮件是一种通信方式，是互联网应用最广的服务。通过网络的电子邮件系统，用户可以以非常低廉的价格（不管发送到哪里，都只需负担网费，实际上就是把信息发送到对方服务器而已）、非常快速的方式，与世界上任何一个地方的电子邮箱用户联系。</p>
<p>要在Internet上提供电子邮件功能，必须有专门的电子邮件服务器。例如现在Internet很多提供邮件服务的厂商：新浪、搜狐、163、QQ邮箱等，都有自己的邮件服务器。这些服务器类似于现实生活中的邮局，主要负责接收用户投递过来的邮件，并把邮件投递到邮件接收者的电子邮箱中。</p>
<p>所有的用户都可以在电子邮件服务器上申请一个账号用于邮件发送和接收</p>
<p>和Http一样，邮件发送也有自己的协议，也就是约定邮件数据长啥样以及如何通信。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://images2015.cnblogs.com/blog/851491/201612/851491-20161202143243756-1715308358.png"
                      alt="img"
                ></p>
<p>比较常用的协议有两种：</p>
<ol>
<li>SMTP协议（主要用于发送邮件 Simple Mail Transfer Protocol）</li>
<li>POP3协议（主要用于接收邮件 Post Office Protocol 3）</li>
</ol>
<p>整个发送&#x2F;接收流程大致如下：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://img2.baidu.com/it/u=3675146129,445744702&fm=253&fmt=auto&app=138&f=JPG?w=812&h=309"
                      alt="img"
                ></p>
<p>每个邮箱服务器都有一个smtp发送服务器和pop3接收服务器，比如要从QQ邮箱发送邮件到163邮箱，那么只需要通过QQ邮箱客户端告知QQ邮箱的smtp服务器需要发送邮件，以及邮件的相关信息，然后QQ邮箱的smtp服务器就会将邮件发送到163邮箱的pop3服务器上，163邮箱会通过163邮箱客户端告知对应用户收到一封新邮件。</p>
<h2 id="邮箱发送"><a href="#邮箱发送" class="headerlink" title="邮箱发送"></a>邮箱发送</h2><p>想要实现给别人发送邮件，那么就需要连接到对应电子邮箱的smtp服务器上，并告知它要发送邮件。</p>
<p>SpringBoot已经将最基本的底层通信全部实现了，使用时只需要关心smtp服务器的地址以及要发送的邮件长啥样即可。</p>
<p><strong>以163邮箱为例</strong></p>
<p>① 首先去163邮箱设置中开启smtp&#x2F;pop3服务，开启后会得到一个随机生成的密钥，这个就是密码</p>
<p>② 在配置文件中告诉SpringBootMail我们的smtp服务器的地址以及邮箱账号和密码</p>
<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mail:</span></span><br><span class="line">  	<span class="comment"># 163邮箱的地址为smtp.163.com，直接填写即可</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">smtp.163.com</span></span><br><span class="line">    <span class="comment"># 我的163邮箱账号</span></span><br><span class="line">    <span class="attr">username:</span> <span class="number">123456</span><span class="string">@163.com</span></span><br><span class="line">    <span class="comment"># 注意密钥是在开启smtp/pop3时自动生成的，记得保存一下，不然就找不到了</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">AZJTOAWZESLMHTNI</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">465</span></span><br><span class="line">    <span class="attr">properties:</span></span><br><span class="line">     <span class="attr">from:</span> <span class="string">m19925651773@163.com</span></span><br><span class="line">     <span class="attr">mail:</span></span><br><span class="line">       <span class="attr">smtp:</span></span><br><span class="line">         <span class="attr">socketFactory:</span></span><br><span class="line">           <span class="attr">class:</span> <span class="string">javax.net.ssl.SSLSocketFactory</span></span><br></pre></td></tr></table></figure></div>

<p>③ SimpleMailMessage封装邮件内容，JavaMailSender将邮件发送</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SpringBootTestApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//JavaMailSender是专门用于发送邮件的对象，自动配置类已经提供了Bean</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JavaMailSender sender;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">      	<span class="comment">//SimpleMailMessage是一个比较简易的邮件封装，支持设置一些比较简单内容</span></span><br><span class="line">        <span class="type">SimpleMailMessage</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleMailMessage</span>();</span><br><span class="line">      	<span class="comment">//设置邮件标题</span></span><br><span class="line">        message.setSubject(<span class="string">&quot;【XXX大学教务处】关于近期学校对您的处分决定&quot;</span>);</span><br><span class="line">      	<span class="comment">//设置邮件内容</span></span><br><span class="line">        message.setText(<span class="string">&quot;XXX同学您好，经监控和教务巡查发现，您近期存在旷课、迟到、早退、上课刷抖音行为，&quot;</span> +</span><br><span class="line">                <span class="string">&quot;现已通知相关辅导员，请手写5000字书面检讨，并在2023年4月27日17点前交到辅导员办公室。&quot;</span>);</span><br><span class="line">      	<span class="comment">//设置邮件发送给谁，可以多个，这里就发给自己的QQ邮箱</span></span><br><span class="line">        message.setTo(<span class="string">&quot;自己的qq号@qq.com&quot;</span>);</span><br><span class="line">      	<span class="comment">//邮件发送者，这里要与配置文件中的保持一致</span></span><br><span class="line">        message.setFrom(<span class="string">&quot;123456@163.com&quot;</span>);</span><br><span class="line">      	<span class="comment">//发送</span></span><br><span class="line">        sender.send(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>④ 如果需要添加附件等更多功能，可以使用MimeMessageHelper来完成：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> <span class="keyword">throws</span> MessagingException &#123;</span><br><span class="line">    <span class="comment">//创建一个MimeMessage</span></span><br><span class="line">    <span class="type">MimeMessage</span> <span class="variable">message</span> <span class="operator">=</span> sender.createMimeMessage();</span><br><span class="line">    <span class="comment">//使用MimeMessageHelper来修改MimeMessage中的信息</span></span><br><span class="line">    <span class="type">MimeMessageHelper</span> <span class="variable">helper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(message, <span class="literal">true</span>);</span><br><span class="line">    helper.setSubject(<span class="string">&quot;Test&quot;</span>);</span><br><span class="line">    helper.setText(<span class="string">&quot;lbwnb&quot;</span>);</span><br><span class="line">    helper.setTo(<span class="string">&quot;你的QQ号@qq.com&quot;</span>);</span><br><span class="line">    helper.setFrom(<span class="string">&quot;javastudy111@163.com&quot;</span>);</span><br><span class="line">  	<span class="comment">//发送修改好的MimeMessage</span></span><br><span class="line">    sender.send(message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="邮件注册"><a href="#邮件注册" class="headerlink" title="邮件注册"></a>邮件注册</h2><p>邮箱注册流程：</p>
<ol>
<li>请求验证码</li>
<li>生成验证码并发送给对应邮箱（临时有效，注意设定过期时间）</li>
<li>用户输入验证码并填写注册信息</li>
<li>验证通过注册成功</li>
</ol>
<h1 id="接口规则校验"><a href="#接口规则校验" class="headerlink" title="接口规则校验"></a>接口规则校验</h1><p>用户发送的数据可能存在一些问题</p>
<p>比如在下面这个接口中，在正常情况下，用户名长度规定不小于5，如果用户发送的数据是没有问题的，那么就可以正常运行。但是如果用户发送的数据并不是按照规定的，那么就会直接报错</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/submit&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">submit</span><span class="params">(String username,</span></span><br><span class="line"><span class="params">                     String password)</span>&#123;</span><br><span class="line">    System.out.println(username.substring(<span class="number">3</span>));</span><br><span class="line">    System.out.println(password.substring(<span class="number">2</span>, <span class="number">10</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;请求成功!&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>可以在请求来后进行校验判断：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/submit&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">submit</span><span class="params">(String username,</span></span><br><span class="line"><span class="params">                     String password)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(username.length() &gt; <span class="number">3</span> || password.length() &gt; <span class="number">10</span>) &#123;</span><br><span class="line">        System.out.println(username.substring(<span class="number">3</span>));</span><br><span class="line">        System.out.println(password.substring(<span class="number">2</span>, <span class="number">10</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;请求成功!&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;请求失败&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>但是如果每一个接口都这样去进行配置，太麻烦了。</p>
<hr>
<p>这里可以使用SpringBoot提供了的接口校验框架：</p>
<p><strong>导入依赖</strong></p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p><strong>使用注解完成接口的校验</strong></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Validated</span><span class="comment">//在Controller上开启接口校验</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/submit&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">submit</span><span class="params">(<span class="meta">@Length(min = 3)</span> String username,  //使用<span class="meta">@Length</span>注解一步到位</span></span><br><span class="line"><span class="params">                         <span class="meta">@Length(min = 10)</span> String password)</span>&#123;</span><br><span class="line">        System.out.println(username.substring(<span class="number">3</span>));</span><br><span class="line">        System.out.println(password.substring(<span class="number">2</span>, <span class="number">10</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;请求成功!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>依然会抛出异常，<strong>配置异常处理Controller</strong>来自行处理这类异常：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ValidationController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(ConstraintViolationException.class)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">error</span><span class="params">(ValidationException e)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> e.getMessage();   <span class="comment">//出现异常直接返回消息</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p>如果接口接收的<strong>参数是对象形式的</strong>，验证方法如下：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/submit&quot;)</span>  <span class="comment">//在参数上添加@Valid注解表示需要验证</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">submit</span><span class="params">(<span class="meta">@Valid</span> Account account)</span>&#123;</span><br><span class="line">    System.out.println(account.getUsername().substring(<span class="number">3</span>));</span><br><span class="line">    System.out.println(account.getPassword().substring(<span class="number">2</span>, <span class="number">10</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;请求成功!&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> &#123;</span><br><span class="line">    <span class="comment">//在对应的字段上添加校验的注解</span></span><br><span class="line">    <span class="meta">@Length(min = 3)</span> </span><br><span class="line">    String username;</span><br><span class="line">    <span class="meta">@Length(min = 10)</span></span><br><span class="line">    String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>修改下异常处理Controller</strong><br>对于实体类接收参数的验证，会抛出MethodArgumentNotValidException异常</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@ExceptionHandler(&#123;ConstraintViolationException.class, MethodArgumentNotValidException.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">error</span><span class="params">(Exception e)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(e <span class="keyword">instanceof</span> ConstraintViolationException exception) &#123;</span><br><span class="line">        <span class="keyword">return</span> exception.getMessage();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(e <span class="keyword">instanceof</span> MethodArgumentNotValidException exception)&#123;</span><br><span class="line">        <span class="keyword">if</span> (exception.getFieldError() == <span class="literal">null</span>) <span class="keyword">return</span> <span class="string">&quot;未知错误&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> exception.getFieldError().getDefaultMessage();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;未知错误&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><strong>更多验证注解</strong></p>
<table>
<thead>
<tr>
<th align="center">验证注解</th>
<th align="center">验证的数据类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">@AssertFalse</td>
<td align="center">Boolean,boolean</td>
<td align="center">值必须是false</td>
</tr>
<tr>
<td align="center">@AssertTrue</td>
<td align="center">Boolean,boolean</td>
<td align="center">值必须是true</td>
</tr>
<tr>
<td align="center">@NotNull</td>
<td align="center">任意类型</td>
<td align="center">值不能是null</td>
</tr>
<tr>
<td align="center">@Null</td>
<td align="center">任意类型</td>
<td align="center">值必须是null</td>
</tr>
<tr>
<td align="center">@Min</td>
<td align="center">BigDecimal、BigInteger、byte、short、int、long、double 以及任何Number或CharSequence子类型</td>
<td align="center">大于等于@Min指定的值</td>
</tr>
<tr>
<td align="center">@Max</td>
<td align="center">同上</td>
<td align="center">小于等于@Max指定的值</td>
</tr>
<tr>
<td align="center">@DecimalMin</td>
<td align="center">同上</td>
<td align="center">大于等于@DecimalMin指定的值（超高精度）</td>
</tr>
<tr>
<td align="center">@DecimalMax</td>
<td align="center">同上</td>
<td align="center">小于等于@DecimalMax指定的值（超高精度）</td>
</tr>
<tr>
<td align="center">@Digits</td>
<td align="center">同上</td>
<td align="center">限制整数位数和小数位数上限</td>
</tr>
<tr>
<td align="center">@Size</td>
<td align="center">字符串、Collection、Map、数组等</td>
<td align="center">长度在指定区间之内，如字符串长度、集合大小等</td>
</tr>
<tr>
<td align="center">@Past</td>
<td align="center">如 java.util.Date, java.util.Calendar 等日期类型</td>
<td align="center">值必须比当前时间早</td>
</tr>
<tr>
<td align="center">@Future</td>
<td align="center">同上</td>
<td align="center">值必须比当前时间晚</td>
</tr>
<tr>
<td align="center">@NotBlank</td>
<td align="center">CharSequence及其子类</td>
<td align="center">值不为空，在比较时会去除字符串的首位空格</td>
</tr>
<tr>
<td align="center">@Length</td>
<td align="center">CharSequence及其子类</td>
<td align="center">字符串长度在指定区间内</td>
</tr>
<tr>
<td align="center">@NotEmpty</td>
<td align="center">CharSequence及其子类、Collection、Map、数组</td>
<td align="center">值不为null且长度不为空（字符串长度不为0，集合大小不为0）</td>
</tr>
<tr>
<td align="center">@Range</td>
<td align="center">BigDecimal、BigInteger、CharSequence、byte、short、int、long 以及原子类型和包装类型</td>
<td align="center">值在指定区间内</td>
</tr>
<tr>
<td align="center">@Email</td>
<td align="center">CharSequence及其子类</td>
<td align="center">值必须是邮件格式</td>
</tr>
<tr>
<td align="center">@Pattern</td>
<td align="center">CharSequence及其子类</td>
<td align="center">值需要与指定的正则表达式匹配</td>
</tr>
<tr>
<td align="center">@Valid</td>
<td align="center">任何非原子类型</td>
<td align="center">用于验证对象属性</td>
</tr>
</tbody></table>
<h1 id="Swagger接口管理"><a href="#Swagger接口管理" class="headerlink" title="Swagger接口管理"></a>Swagger接口管理</h1><p>前后端分离的开发模式中，前端和后端的工作由不同的工程师完成。在这种开发模式下，维持一份及时更新且完整的Rest API 文档将会极大的提高工作效率。</p>
<p>传统意义上的文档都是后端开发人员手动编写的。这种方式很难保证文档的及时性，久而久之也就会失去其参考意义，反而还会加大沟通成本。</p>
<p>而Swagger提供了一个全新的维护API文档的方式</p>
<ol>
<li>代码变，文档变。只需要少量的注解，Swagger 就可以根据代码自动生成 API文档，很好的保证了文档的时效性。</li>
<li>跨语言性，支持 40 多种语言。</li>
<li>Swagger UI呈现出来的是一份可交互式的API文档。我们可以直接在文档页面尝试 API 的调用，省去了准备复杂的调用参数的过程。</li>
</ol>
<hr>
<p><strong>先导入依赖</strong></p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springdoc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springdoc-openapi-starter-webmvc-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>项目启动之后，直接访问：<a class="link"   target="_blank" rel="noopener" href="http://localhost:8080/swagger-ui/index.html%EF%BC%8C" >http://localhost:8080/swagger-ui/index.html， <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 就能看到开发文档<br>开发文档中自动包含了项目种定义的接口，并且还有对应的实体类，不仅仅可以展示接口，也可以直接在上面进行调试</p>
<p><strong>配置整体页面信息，展示自定义的文本信息</strong></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> OpenAPI <span class="title function_">springDocOpenAPI</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OpenAPI</span>().info(<span class="keyword">new</span> <span class="title class_">Info</span>()</span><br><span class="line">                        .title(<span class="string">&quot;图书管理系统 - 在线API接口文档&quot;</span>)   <span class="comment">//设置API文档网站标题</span></span><br><span class="line">                        .description(<span class="string">&quot;这是一个图书管理系统的后端API文档，欢迎前端人员查阅！&quot;</span>) <span class="comment">//网站介绍</span></span><br><span class="line">                        .version(<span class="string">&quot;2.0&quot;</span>)   <span class="comment">//当前API版本</span></span><br><span class="line">                        .license(<span class="keyword">new</span> <span class="title class_">License</span>().name(<span class="string">&quot;啦啦啦&quot;</span>)  <span class="comment">//遵循的协议，这里拿来写其他的也行</span></span><br><span class="line">                                .url(<span class="string">&quot;https://www.baidu.com&quot;</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>为Controller编写API描述信息</strong></p>
<p>在类名称上面添加<code>@Tag</code>注解，并填写相关信息，来为当前的Controller设置描述信息。</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用@Tag注解来添加Controller描述信息</span></span><br><span class="line"><span class="meta">@Tag(name = &quot;账户验证相关&quot;, description = &quot;包括用户登录、注册、验证码请求等操作。&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>为请求映射配置描述信息</strong></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">       //不同返回状态码描述</span></span><br><span class="line"><span class="meta">       @ApiResponse(responseCode = &quot;200&quot;, description = &quot;测试成功&quot;),</span></span><br><span class="line"><span class="meta">       @ApiResponse(responseCode = &quot;500&quot;, description = &quot;测试失败&quot;)   </span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="meta">@Operation(summary = &quot;请求用户数据测试接口&quot;)</span>   <span class="comment">//接口功能描述</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="comment">//请求参数描述和样例</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(<span class="meta">@ApiParam(description = &quot;测试文本数据&quot;, example = &quot;KFCvivo50&quot;)</span> String text)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>不需要展示在文档中的接口，也可以将其忽略掉</strong></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Hidden</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>为实体类编写对应的API接口文档</strong></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Schema(description = &quot;用户信息实体类&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;用户编号&quot;)</span></span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;用户名称&quot;)</span></span><br><span class="line">    String name;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;用户邮箱&quot;)</span></span><br><span class="line">    String email;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;用户密码&quot;)</span></span><br><span class="line">    String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<hr>
<p>接口文档只适合在开发环境下生成，如果是生产环境，需要关闭文档：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">springdoc:</span><br><span class="line">  api-docs:</span><br><span class="line">    enabled: <span class="literal">false</span></span><br></pre></td></tr></table></figure></div>

<h1 id="指标监控"><a href="#指标监控" class="headerlink" title="指标监控"></a>指标监控</h1><p>​日常开发中需要对程序内部的运行情况进行监控，比如：健康度、运行指标、日志信息、线程状况等等。而SpringBoot的监控Actuator就可以解决这些问题。</p>
<p><strong>常用端点</strong></p>
<table>
<thead>
<tr>
<th align="left">端点名称</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>beans</code></td>
<td align="left">显示应用程序中所有Spring Bean的完整列表。</td>
</tr>
<tr>
<td align="left"><code>health</code></td>
<td align="left">显示应用程序运行状况信息。</td>
</tr>
<tr>
<td align="left"><code>info</code></td>
<td align="left">显示应用程序信息。</td>
</tr>
<tr>
<td align="left"><code>loggers</code></td>
<td align="left">显示和修改应用程序中日志的配置。</td>
</tr>
<tr>
<td align="left"><code>metrics</code></td>
<td align="left">显示当前应用程序的“指标”信息。</td>
</tr>
<tr>
<td align="left"><code>mappings</code></td>
<td align="left">显示所有<code>@RequestMapping</code>路径列表。</td>
</tr>
<tr>
<td align="left"><code>scheduledtasks</code></td>
<td align="left">显示应用程序中的计划任务。</td>
</tr>
</tbody></table>
<h2 id="直接访问Actuator（了解就行）"><a href="#直接访问Actuator（了解就行）" class="headerlink" title="直接访问Actuator（了解就行）"></a>直接访问Actuator（了解就行）</h2><p>直接访问actuator只是响应个Json数据，阅读困难（特别是很复杂的时候）</p>
<ol>
<li>添加依赖</li>
</ol>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span></span></span><br><span class="line"><span class="tag"> 	&lt;<span class="attr">groupIdorg.springframework.boot</span>&lt;/<span class="attr">groupId</span></span></span><br><span class="line"><span class="tag"> 	&lt;<span class="attr">artifactIdspring-boot-starter-actuator</span>&lt;/<span class="attr">artifactId</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">dependency</span></span></span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>访问监控接口</li>
</ol>
<p><a class="link"   target="_blank" rel="noopener" href="http://localhost:81/actuator" >http://localhost:81/actuator <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<ol start="3">
<li>配置启用监控端点</li>
</ol>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">enabled-by-default:</span> <span class="literal">true</span> <span class="comment">#配置启用所有端点</span></span><br><span class="line">	<span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;*&quot;</span> <span class="comment">#web端暴露所有端点</span></span><br><span class="line">  <span class="attr">endpoint:</span></span><br><span class="line">  <span class="attr">health:</span></span><br><span class="line">      <span class="attr">show-details:</span> <span class="string">always</span> <span class="comment">#展示所有的健康信息</span></span><br></pre></td></tr></table></figure></div>

<h2 id="图形化界面SpringBoot-Admin"><a href="#图形化界面SpringBoot-Admin" class="headerlink" title="图形化界面SpringBoot Admin"></a>图形化界面SpringBoot Admin</h2><p>这个东西就是把actuator响应的Json数据进行解析，展示在图形化界面上</p>
<p>Admin Server是用来接收监控信息，并进行展示的服务</p>
<p>Admin client提供监控信息（比如说要监控的一个项目模块就是一个Admin client）</p>
<p>配置启用监控端点</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">enabled-by-default:</span> <span class="literal">true</span> <span class="comment">#配置启用所有端点</span></span><br><span class="line">	<span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;*&quot;</span> <span class="comment">#web端暴露所有端点</span></span><br><span class="line">  <span class="attr">endpoint:</span></span><br><span class="line">  <span class="attr">health:</span></span><br><span class="line">      <span class="attr">show-details:</span> <span class="string">always</span> <span class="comment">#展示所有的健康信息</span></span><br></pre></td></tr></table></figure></div>


<p><strong>先创建SpringBoot Admin Server应用</strong></p>
<p>引入spring-boot-admin-starter-server依赖</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">groupIdde.codecentric</span>&lt;/<span class="attr">groupId</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">artifactIdspring-boot-admin-starter-server</span>&lt;/<span class="attr">artifactId</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">dependency</span></span></span><br></pre></td></tr></table></figure></div>

<p>然后在启动类上加上@EnableAdminServer注解</p>
<p><strong>然后配置SpringBoot Admin client应用</strong></p>
<p>在需要监控的模块中加上spring-boot-admin-starter-client依赖</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">groupIdde.codecentric</span>&lt;/<span class="attr">groupId</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">artifactIdspring-boot-admin-starter-client</span>&lt;/<span class="attr">artifactId</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">version2.3.1</span>&lt;/<span class="attr">version</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">dependency</span></span></span><br></pre></td></tr></table></figure></div>

<p>然后配置SpringBoot Admin Server的地址</p>
<div class="highlight-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">boot:</span></span><br><span class="line">    <span class="attr">admin:</span></span><br><span class="line">      <span class="attr">client:</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">http://localhost:8888</span> <span class="comment">#配置 Admin Server的地址</span></span><br></pre></td></tr></table></figure></div>

<h1 id="打包运行"><a href="#打包运行" class="headerlink" title="打包运行"></a>打包运行</h1><p>Maven生命周期中的<code>package</code>会自动将项目打包为可直接运行的Jar包</p>
<p>打包的过程中还会完整的将项目跑一遍进行测试，如果不想测试直接打包，可以手动使用以下命令：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn package  -DskipTests</span><br></pre></td></tr></table></figure></div>

<p>打包后，会直接得到一个名为<code>springboot-study-0.0.1-SNAPSHOT.jar</code>的文件，在它的所在位置CMD窗口中输入命令就可以运行项目了：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar springboot-study-0.0.1-SNAPSHOT.jar</span><br></pre></td></tr></table></figure></div>

<p>也可以创建start.bat文件，内容就是上述命令，那么双击这个文件就可以运行项目</p>

            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul>
        <li>Post title：SpringBoot学习笔记</li>
        <li>Post author：萧</li>
        <li>Create time：2023-04-01 08:14:24</li>
        <li>
            Post link：https://redefine.ohevan.com/2023/04/01/Java后端开发/SpringBoot/SpringBoot笔记/
        </li>
        <li>
            Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

                </div>
            

            

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                            rel="prev"
                            href="/2023/04/01/Java%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/MybatisPlus/MybatisPlus/"
                            >
                                <span class="left arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </span>
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">MybatisPlus简单使用</span>
                                    <span class="post-nav-item">Prev posts</span>
                                </span>
                            </a>
                        </div>
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/2023/04/01/Java%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/%E6%9D%83%E9%99%90%E6%A0%A1%E9%AA%8C/SpringSecurity+JWT/"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">SpringSecurity + JWT</span>
                                    <span class="post-nav-item">Next posts</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            

            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div style="font-size: 1.3rem;margin-top: 0; margin-bottom: 0.8rem; transition-duration: 0.1s;"><i class="fa-solid fa-list"></i> <strong>Contents</strong></div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringBoot%E4%B8%80%E7%AB%99%E5%BC%8F%E5%BC%80%E5%8F%91"><span class="nav-text">SpringBoot一站式开发</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringBoot%E4%B8%A4%E5%A4%A7%E7%89%B9%E6%80%A7"><span class="nav-text">SpringBoot两大特性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B5%B7%E6%AD%A5%E4%BE%9D%E8%B5%96"><span class="nav-text">起步依赖</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="nav-text">自动配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E7%BD%AE%E2%80%94%E6%A3%80%E6%9F%A5%E7%8E%AF%E5%A2%83"><span class="nav-text">前置—检查环境</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringBoot%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%EF%BC%88%E5%95%A5%E9%83%BD%E4%B8%8D%E5%8B%BE%E9%80%89%EF%BC%89"><span class="nav-text">SpringBoot项目文件结构（啥都不勾选）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringBoot%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-text">SpringBoot的配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#yml%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-text">yml基本语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBoot%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-text">SpringBoot读取配置文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Value%E6%B3%A8%E5%85%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E5%80%BC"><span class="nav-text">@Value注入配置文件的值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ConfigurationProperties%E6%B3%A8%E5%85%A5"><span class="nav-text">@ConfigurationProperties注入</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Web%E5%BC%80%E5%8F%91"><span class="nav-text">Web开发</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B4%E5%90%88Web%E7%9B%B8%E5%85%B3%E6%A1%86%E6%9E%B6"><span class="nav-text">整合Web相关框架</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B4%E5%90%88SpringSecurity%E4%BE%9D%E8%B5%96"><span class="nav-text">整合SpringSecurity依赖</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B4%E5%90%88junit"><span class="nav-text">整合junit</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B4%E5%90%88%E6%B5%81%E7%A8%8B"><span class="nav-text">整合流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%BC%E5%AE%B9%E8%80%81%E7%89%88%E6%9C%AC"><span class="nav-text">兼容老版本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B4%E5%90%88Mybatis%E6%A1%86%E6%9E%B6"><span class="nav-text">整合Mybatis框架</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B4%E5%90%88Thymeleaf%E6%A1%86%E6%9E%B6"><span class="nav-text">整合Thymeleaf框架</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="nav-text">访问静态资源</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E6%A0%BC%E5%BC%8F%E7%BB%9F%E4%B8%80"><span class="nav-text">响应格式统一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82"><span class="nav-text">跨域请求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ControllerAdvice%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%EF%BC%88%E5%92%8CSpringMVC%E4%B8%80%E6%A0%B7%EF%BC%89"><span class="nav-text">@ControllerAdvice统一异常处理（和SpringMVC一样）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96web%E5%8E%9F%E7%94%9F%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="nav-text">获取web原生对象（了解）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B0%E8%A7%A3%E6%9E%90"><span class="nav-text">自定义参数解析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%90%AF%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="nav-text">开启声明式事务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AOP"><span class="nav-text">AOP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="nav-text">使用步骤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%87%E6%8D%A2%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="nav-text">切换动态代理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F"><span class="nav-text">日志系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%90%AF%E6%97%A5%E5%BF%97"><span class="nav-text">开启日志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8A%B1%E9%87%8C%E8%83%A1%E5%93%A8"><span class="nav-text">花里胡哨</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E9%97%A8%E9%9D%A2%E5%92%8C%E6%97%A5%E5%BF%97%E5%AE%9E%E7%8E%B0"><span class="nav-text">日志门面和日志实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8SpringBoot%E4%B8%AD%E6%89%93%E5%8D%B0%E6%97%A5%E5%BF%97%E4%BF%A1%E6%81%AF"><span class="nav-text">在SpringBoot中打印日志信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AELogback%E6%97%A5%E5%BF%97"><span class="nav-text">配置Logback日志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89Banner"><span class="nav-text">自定义Banner</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="nav-text">多环境配置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%82%AE%E4%BB%B6%E5%8A%9F%E8%83%BD"><span class="nav-text">邮件功能</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%82%AE%E4%BB%B6Mail"><span class="nav-text">邮件Mail</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%86%E8%A7%A3%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="nav-text">了解电子邮件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%82%AE%E7%AE%B1%E5%8F%91%E9%80%81"><span class="nav-text">邮箱发送</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%82%AE%E4%BB%B6%E6%B3%A8%E5%86%8C"><span class="nav-text">邮件注册</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3%E8%A7%84%E5%88%99%E6%A0%A1%E9%AA%8C"><span class="nav-text">接口规则校验</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Swagger%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86"><span class="nav-text">Swagger接口管理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8C%87%E6%A0%87%E7%9B%91%E6%8E%A7"><span class="nav-text">指标监控</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%B4%E6%8E%A5%E8%AE%BF%E9%97%AEActuator%EF%BC%88%E4%BA%86%E8%A7%A3%E5%B0%B1%E8%A1%8C%EF%BC%89"><span class="nav-text">直接访问Actuator（了解就行）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%95%8C%E9%9D%A2SpringBoot-Admin"><span class="nav-text">图形化界面SpringBoot Admin</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E8%BF%90%E8%A1%8C"><span class="nav-text">打包运行</span></a></li></ol>
    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>



        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2022</span>
              -
            
            2023&nbsp;<i class="fa-solid fa-heart icon-animate"></i>&nbsp;<a href="/">萧. All Rights Reserved.</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        Totalviews&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v0.5.2</a>
        </div>
        
        
        <script async data-pjax defer>
            function odometer_init(){
                    let el = document.getElementsByClassName('odometer');
                    for (i = 0; i < el.length; i++) {
                        od = new Odometer({
                            el: el[i],
                            format: '( ddd).dd',
                            duration: 200
                        });
                    }
            }
            odometer_init();
        </script>
        <div id="start_time_div" style="display:none">
            2022/8/17 11:45:14
        </div>
        
            <div>
                Blog up for <span class="odometer" id="runtime_days" ></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec
            </div>
        
        

        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fa-solid fa-magnifying-glass-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fa-solid fa-magnifying-glass-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fa-solid fa-left-right"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fa-solid fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fa-solid fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fa-solid fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fa-solid fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>





    
<script src="/js/code-copy.js"></script>




    
<script src="/js/lazyload.js"></script>




    
<script src="/js/runtime.js"></script>

    
<script src="/js/odometer.min.js"></script>

    
<link rel="stylesheet" href="/css/odometer-theme-minimal.css">



<div class="post-scripts pjax">
    
        
<script src="/js/toc-toggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/toc.js"></script>

    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            REDEFINE.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            REDEFINE.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            REDEFINE.refresh();
        });
    });
</script>



</body>
</html>
